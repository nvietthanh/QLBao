import{i as w,j as x,k as b,l,o as r,c as d,w as c,a as t,b as y,e as f,t as g,h as u,f as p}from"./app-2a871929.js";import{C as k}from"./Ckeditor-fd58bb26.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const F={components:{Link:w,CkeditorPost:k},data(){return{id:"",dialogVisible:!1,imageSelected:"",dataForm:{name:""},errors:[]}},watch:{dialogVisible(i){i==!1&&(this.imageSelected="",this.$refs.file="",this.dataForm={},this.errors=[])}},methods:{async open(i){this.id=i,this.dialogVisible=!0;const e=await x.get(route("admin.advertists.show",i));this.dataForm=e.data.data},cancel(){this.dialogVisible=!1},async changeImage(i){try{const e=i.target.files||i.dataTransfer.files;if(!e.length)return;if(e[0].size>5*1024*1024)return this.$message.warning(this.$i18n.t("File quá lớn, dung lượng tối đa cho phép 5MB")),!1;const m=e[0].name.substring(e[0].name.lastIndexOf(".")),n=[".png",".bmp",".jpeg",".tif",".gif",".jpg"];if(!n.find(s=>s===m))return this.$message.warning(this.$i18n.t("File sai định dạng. Cần thuộc các định dạng sau: ")+n.join(", ")),!1;this.dataForm.image=e[0],this.imageSelected=URL.createObjectURL(e[0])}catch(e){console.log("handleUploadContent",e)}},async editAdvertist(){const i=new FormData;i.append("name",this.dataForm.name??""),i.append("image",this.dataForm.image??""),await x.post(route("admin.advertists.update",this.id),i).then(e=>{b({showClose:!0,message:"Cập nhật đối tác thành công",type:"success"}),this.dialogVisible=!1,this.$emit("change-advertist")}).catch(e=>{this.errors=e.response.data.errors})}}},C=t("div",{class:"text-center font-bold text-[18px]"}," Thêm quảng cáo ",-1),j={class:"mx-[4px] mt-[42px]"},S={class:"mt-[18px] w-[100%]"},U=t("div",{class:"text-[16px] font-bold text-[#000]"},[p("Tên đối tác "),t("span",{class:"text-[red]"},"*")],-1),z={key:0,class:"mt-[5px] text-[#ff0000]"},A={class:"mt-[18px] w-[100%]"},B=t("div",{class:"text-[16px] font-bold text-[#000]"},[p("Hình ảnh "),t("span",{class:"text-[red]"},"*")],-1),N={class:"w-[280px] mt-[8px]"},T=t("i",{class:"bi bi-upload text-lg mr-[8px] text-white"},null,-1),E={key:0,class:"mt-[5px] text-[#ff0000]"},I={class:"pb-[12px] pt-[8px]"},L={class:"flex justify-end text-[14px] mr-[24px]"};function q(i,e,m,n,s,a){const _=l("el-input"),h=l("el-image"),v=l("el-dialog");return r(),d(v,{modelValue:s.dialogVisible,"onUpdate:modelValue":e[5]||(e[5]=o=>s.dialogVisible=o),id:"edit-advertist",class:"bg-[#f4f1f8] max-h-[80%] overflow-y-scroll",width:"500px",style:{"margin-top":"44px !important"},"show-close":!0},{header:c(()=>[C]),footer:c(()=>[t("div",I,[t("div",L,[t("div",{onClick:e[3]||(e[3]=(...o)=>a.cancel&&a.cancel(...o)),class:"cursor-pointer flex justify-center items-center w-[110px] rounded-[4px] bg-[#ffffff] py-[4px] h-[32px] text-[15px] text-black border border-[#7d7f92]"}," Hủy bỏ "),t("div",{class:"cursor-pointer flex justify-center items-center w-[110px] ml-[18px] rounded-[4px] bg-[#007bff] py-[4px] h-[32px] text-[15px] text-white",onClick:e[4]||(e[4]=(...o)=>a.editAdvertist&&a.editAdvertist(...o))}," Xác nhận ")])])]),default:c(()=>[t("div",j,[t("div",S,[U,y(_,{class:"mt-[2px]",modelValue:s.dataForm.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.dataForm.name=o),placeholder:"Nhập tiêu đề",clearable:""},null,8,["modelValue"]),s.errors.name?(r(),f("div",z,g(s.errors.name[0]),1)):u("",!0)]),t("div",A,[B,t("div",N,[s.imageSelected?(r(),d(h,{key:0,style:{width:"100%",height:"100%"},src:s.imageSelected,"zoom-rate":1.2,"preview-teleported":"true","hide-on-click-modal":"true","preview-src-list":[s.imageSelected],"initial-index":1,fit:"cover"},null,8,["src","zoom-rate","preview-src-list"])):(r(),d(h,{key:1,style:{width:"100%",height:"100%"},src:s.dataForm.image,"zoom-rate":1.2,"preview-teleported":"true","hide-on-click-modal":"true","preview-src-list":[s.dataForm.image],"initial-index":1,fit:"cover"},null,8,["src","zoom-rate","preview-src-list"]))]),t("div",{class:"cursor-pointer flex justify-center items-center w-[180px] rounded-[20px] bg-[#007bff] px-[10px] py-[4px] h-[32px] text-[14px] text-white mt-[8px]",onClick:e[2]||(e[2]=o=>this.$refs.file.click())},[t("input",{type:"file",ref:"file",accept:".jpg,.png,.bmp,.jpeg,.tif,.gif",onChange:e[1]||(e[1]=(...o)=>a.changeImage&&a.changeImage(...o)),hidden:""},null,544),T,p(" Upload hình ảnh ")]),s.errors.image?(r(),f("div",E,g(s.errors.image[0]),1)):u("",!0)])])]),_:1},8,["modelValue"])}const O=V(F,[["render",q]]);export{O as default};
