import{A as D}from"./AppLayoutAdmin-d2e3b506.js";import{i as S,j as d,k as p,E as V,l,o as h,c as m,w as o,a as s,b as r,e as u,g as w,F,f as T,t as L,h as P}from"./app-2a871929.js";import{D as B}from"./DataTable-8bf8d838.js";import{P as E}from"./Paginate-55ef9a15.js";import N from"./AddAdvertist-d0911ce7.js";import j from"./EditAdvertist-957a0cc8.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-4ecace4f.js";import"./Ckeditor-fd58bb26.js";const M={components:{AppLayoutAdmin:D,Link:S,Paginate:E,DataTable:B,AddAdvertistForm:N,EditAdvertistForm:j},data(){return{tab:"tab-0",fields:[{key:"name",label:"Tên đối tác",align:"center"},{key:"image",label:"Hình ảnh",align:"center",width:300},{key:"status",label:"Trạng thái",align:"center",width:120},{key:"created_at",label:"Ngày tạo",align:"center",width:160},{key:"updated_at",label:"Ngày cập nhật",align:"center",width:160},{key:"options",label:"Options",align:"center",width:90}],options:[6,12,24,32],filterSearch:{limit:6,search:"",page:1},paginate:[],tableData:[],selectedValue:[]}},created(){this.fetchData(),document.title="Quản lý quảng cáo - Admin hệ thống"},methods:{clearFilter(){this.filterSearch.page=1,this.filterSearch.search="",this.filterSearch.limit=6,this.paginate=[],this.tableData=[]},async fetchData(){const a={...this.filterSearch},t=await d.get(route("admin.advertists.index",a));this.tableData=t.data.data,this.paginate=t.data.meta},handleCurrentPage(a){this.filterSearch.page=a,this.fetchData()},handleSelectionChange(a){this.selectedValue=a},addAdvertist(){this.$refs.addAdvertistForm.open()},editAdvertist(a){console.log(a),this.$refs.editAdvertistForm.open(a.id)},changeStatus(a){d.get(route("admin.advertists.change-status",a.id)).then(t=>{this.fetchData()})},deletePosts(){this.selectedValue.length==0?p({type:"warning",message:"Vui lòng chọn bài viết muốn xóa"}):V.confirm("Bạn có muốn xóa các bài viết vừa chọn không?","Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{const a={advertists:this.selectedValue};d.post(route("admin.advertists.delete-advertists"),a).then(t=>{this.fetchData(),p({type:"success",message:"Xóa bài viết thành công"})})}).catch(()=>{})},deleteSelection(a){d.delete(route("admin.advertists.destroy",a.id)).then(t=>{this.fetchData(),p({type:"success",message:"Xóa bài viết thành công"})})}}},U=s("div",{class:"mt-[12px] flex text-[18px] font-bold uppercase"}," Danh sách đối tác quảng cáo ",-1),X={class:"mb-[24px] mt-[12px]"},q={class:"mb-[18px] flex items-center"},R={class:"text-left hover:text-[blue]"},z=["innerHTML"],K=["src"],O={class:"h-[36px] flex justify-center items-center"},Q={class:"flex justify-center"},W=["onClick"],G=s("i",{class:"bi bi-pencil-fill"},null,-1),I=[G],J=["onClick"],Y=s("i",{class:"bi bi-trash3-fill"},null,-1),Z=[Y],$={key:0,class:"flex justify-end mt-[32px] mr-[16px]"};function ee(a,t,te,ae,i,n){const g=l("el-option"),f=l("el-select"),_=l("el-input"),x=l("Link"),v=l("el-switch"),b=l("DataTable"),A=l("Paginate"),y=l("AddAdvertistForm"),k=l("EditAdvertistForm"),C=l("AppLayoutAdmin");return h(),m(C,{currentTab:"tab-6",currentTabChild:"tab-4"},{"main-full":o(()=>[U,s("div",X,[s("div",q,[r(f,{modelValue:i.filterSearch.limit,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterSearch.limit=e),class:"max-w-[60px] ml-[8px]",onChange:t[1]||(t[1]=e=>n.fetchData())},{default:o(()=>[(h(!0),u(F,null,w(i.options,e=>(h(),m(g,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(_,{class:"mx-[20px] max-w-[300px]",modelValue:i.filterSearch.search,"onUpdate:modelValue":t[2]||(t[2]=e=>i.filterSearch.search=e),placeholder:"Nhập từ khóa",clearable:"",onKeyup:t[3]||(t[3]=e=>n.fetchData())},null,8,["modelValue"]),s("div",{class:"bg-[blue] text-[14px] py-[5px] px-[18px] text-white rounded-[4px] cursor-pointer",onClick:t[4]||(t[4]=(...e)=>n.addAdvertist&&n.addAdvertist(...e))}," Thêm mới "),s("div",{class:"ml-[18px] text-[14px] px-[24px] py-[5px] rounded-[4px] bg-[red] text-white cursor-pointer",onClick:t[5]||(t[5]=(...e)=>n.deletePosts&&n.deletePosts(...e))}," Xóa quảng cáo ")]),r(b,{fields:i.fields,items:i.tableData,"enable-select-box":"",onRowSelected:n.handleSelectionChange},{slug:o(({row:e})=>[s("div",R,[r(x,{href:a.route("post",e.slug)},{default:o(()=>[T(L(e.slug),1)]),_:2},1032,["href"])])]),content:o(({row:e})=>[s("div",{class:"text-left post-content",innerHTML:e.content},null,8,z)]),image:o(({row:e})=>[s("img",{src:e.image,alt:"",class:"object-cover h-[180px] w-[100%]"},null,8,K)]),status:o(({row:e})=>[s("div",O,[r(v,{modelValue:e.status,"onUpdate:modelValue":c=>e.status=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"inline-prompt":"","active-text":"Activated","inactive-text":"Deactivated",size:"default",onClick:c=>n.changeStatus(e)},null,8,["modelValue","onUpdate:modelValue","onClick"])])]),options:o(({row:e})=>[s("div",Q,[s("span",{class:"text-[18px] cursor-pointer",onClick:c=>n.editAdvertist(e)},I,8,W),s("span",{class:"pl-[8px] text-[18px] cursor-pointer",onClick:c=>n.deleteSelection(e)},Z,8,J)])]),_:1},8,["fields","items","onRowSelected"]),i.tableData.length!=0?(h(),u("div",$,[r(A,{onPageChange:n.handleCurrentPage,paginate:i.paginate,"current-page":i.filterSearch.page||1,"paginate-background":""},null,8,["onPageChange","paginate","current-page"])])):P("",!0)]),r(y,{ref:"addAdvertistForm",onChangeAdvertist:n.fetchData},null,8,["onChangeAdvertist"]),r(k,{ref:"editAdvertistForm",onChangeAdvertist:n.fetchData},null,8,["onChangeAdvertist"])]),_:1})}const pe=H(M,[["render",ee]]);export{pe as default};
