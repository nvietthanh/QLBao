import{i as v,j as b,k as w,l,o as n,c as x,w as d,a as t,b as y,e as f,t as h,h as c,f as p}from"./app-c5eb5df1.js";import{C as V}from"./Ckeditor-04e30514.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";const F={components:{Link:v,CkeditorPost:V},data(){return{dialogVisible:!1,imageSelected:"",dataForm:{name:""},errors:[]}},watch:{dialogVisible(o){o==!1&&(this.imageSelected="",this.$refs.file="",this.dataForm={},this.errors=[])}},methods:{async open(){this.dialogVisible=!0},cancel(){this.dialogVisible=!1},async changeImage(o){try{const e=o.target.files||o.dataTransfer.files;if(!e.length)return;if(e[0].size>5*1024*1024)return this.$message.warning(this.$i18n.t("File quá lớn, dung lượng tối đa cho phép 5MB")),!1;const m=e[0].name.substring(e[0].name.lastIndexOf(".")),r=[".png",".bmp",".jpeg",".tif",".gif",".jpg"];if(!r.find(s=>s===m))return this.$message.warning(this.$i18n.t("File sai định dạng. Cần thuộc các định dạng sau: ")+r.join(", ")),!1;this.dataForm.image=e[0],this.imageSelected=URL.createObjectURL(e[0])}catch(e){console.log("handleUploadContent",e)}},async addAdvertist(){const o=new FormData;o.append("name",this.dataForm.name??""),o.append("image",this.dataForm.image??""),await b.post(route("admin.advertists.store"),o).then(e=>{w({showClose:!0,message:"Thêm đối tác thành công",type:"success"}),this.dialogVisible=!1,this.$emit("change-advertist")}).catch(e=>{this.errors=e.response.data.errors})}}},C=t("div",{class:"text-center font-bold text-[18px]"}," Thêm quảng cáo ",-1),j={class:"mx-[4px] mt-[42px]"},A={class:"mt-[18px] w-[100%]"},S=t("div",{class:"text-[16px] font-bold text-[#000]"},[p("Tên đối tác "),t("span",{class:"text-[red]"},"*")],-1),T={key:0,class:"mt-[5px] text-[#ff0000]"},U={class:"mt-[18px] w-[100%]"},B=t("div",{class:"text-[16px] font-bold text-[#000]"},[p("Hình ảnh "),t("span",{class:"text-[red]"},"*")],-1),N={class:"w-[280px] mt-[8px]"},I=t("i",{class:"bi bi-upload text-lg mr-[8px] text-white"},null,-1),z={key:0,class:"mt-[5px] text-[#ff0000]"},L={class:"pb-[12px] pt-[8px]"},q={class:"flex justify-end text-[14px] mr-[24px]"};function D(o,e,m,r,s,a){const g=l("el-input"),u=l("el-image"),_=l("el-dialog");return n(),x(_,{modelValue:s.dialogVisible,"onUpdate:modelValue":e[5]||(e[5]=i=>s.dialogVisible=i),id:"add-advertist",class:"bg-[#f4f1f8] max-h-[80%] overflow-y-scroll",width:"500px",style:{"margin-top":"44px !important"},"show-close":!0},{header:d(()=>[C]),footer:d(()=>[t("div",L,[t("div",q,[t("div",{onClick:e[3]||(e[3]=(...i)=>a.cancel&&a.cancel(...i)),class:"cursor-pointer flex justify-center items-center w-[110px] rounded-[4px] bg-[#ffffff] py-[4px] h-[32px] text-[15px] text-black border border-[#7d7f92]"}," Hủy bỏ "),t("div",{class:"cursor-pointer flex justify-center items-center w-[110px] ml-[18px] rounded-[4px] bg-[#007bff] py-[4px] h-[32px] text-[15px] text-white",onClick:e[4]||(e[4]=(...i)=>a.addAdvertist&&a.addAdvertist(...i))}," Xác nhận ")])])]),default:d(()=>[t("div",j,[t("div",A,[S,y(g,{class:"mt-[2px]",modelValue:s.dataForm.name,"onUpdate:modelValue":e[0]||(e[0]=i=>s.dataForm.name=i),placeholder:"Nhập tiêu đề",clearable:""},null,8,["modelValue"]),s.errors.name?(n(),f("div",T,h(s.errors.name[0]),1)):c("",!0)]),t("div",U,[B,t("div",N,[s.imageSelected?(n(),x(u,{key:0,style:{width:"100%",height:"100%"},src:s.imageSelected,"zoom-rate":1.2,"preview-teleported":"true","hide-on-click-modal":"true","preview-src-list":[s.imageSelected],"initial-index":1,fit:"cover"},null,8,["src","zoom-rate","preview-src-list"])):c("",!0)]),t("div",{class:"cursor-pointer flex justify-center items-center w-[180px] rounded-[20px] bg-[#007bff] px-[10px] py-[4px] h-[32px] text-[14px] text-white mt-[8px]",onClick:e[2]||(e[2]=i=>this.$refs.file.click())},[t("input",{type:"file",ref:"file",accept:".jpg,.png,.bmp,.jpeg,.tif,.gif",onChange:e[1]||(e[1]=(...i)=>a.changeImage&&a.changeImage(...i)),hidden:""},null,544),I,p(" Upload hình ảnh ")]),s.errors.image?(n(),f("div",z,h(s.errors.image[0]),1)):c("",!0)])])]),_:1},8,["modelValue"])}const O=k(F,[["render",D]]);export{O as default};
