import{A as q,L as K}from"./AppLayout-06d5a6f0.js";import{i as R,a2 as S,a3 as z,a4 as T,a5 as E,k as v,j as f,l as h,o as r,c as U,w as c,a as t,b as i,e as d,h as _,E as O,t as u,F as V,g as L,n as P,f as w,_ as A,$ as Q}from"./app-c5eb5df1.js";import{h as D}from"./moment-fbc5633a.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-7eaaec51.js";const Z={components:{Link:R,Delete:S,Download:z,Plus:T,ZoomIn:E},data(){return{dialogVisible:!1,isDefault:!1,dialogVisiblePreview:!1,dialogImageUrl:"",postId:"",dataForm:{images:[],defaultContent:"",content:[]}}},watch:{dialogVisible(o){o==!1&&this.clearData()}},methods:{moment:D,clearData(){this.dataForm.images=[],this.dataForm.defaultContent="",this.dataForm.content=[],this.isDefault=!1,this.dialogVisiblePreview=!1,this.postId="",this.dialogImageUrl=""},async open(o){this.dialogVisible=!0,this.postId=o},handlePictureCardPreview(o){this.dialogImageUrl=o.url,this.dialogVisiblePreview=!0},async sendReport(){if(this.dataForm.content.length==0&&!this.dataForm.defaultContent)v({type:"warning",message:"Vui lòng chọn nội dung báo cáo vi phạm"});else{const o=new FormData;this.dataForm.content.push(this.dataForm.defaultContent),o.append("content",this.dataForm.content);for(let e of this.dataForm.images)o.append("images[]",e.raw);await f.post(route("report-post",this.postId),o).then(e=>{this.dialogVisible=!1,this.clearData(),v({type:"success",message:"Báo cáo vi phạm thành công"})}).catch(()=>{})}},cancel(){this.clearData(),this.dialogVisible=!1}}},G=t("div",{class:"text-center font-bold text-[18px]"}," Báo cáo vi phạm ",-1),W={class:"flex mt-[38px]"},J={class:"py-[12px] px-[32px]"},Y=t("div",{class:"text-[16px] font-bold"},"Hãy chọn vấn đề:",-1),$={class:"py-[12px]"},ee={key:0,class:"flex items-top mt-[4px]"},te=t("span",{class:"ml-[12px] mt-[8px] w-[210px]"},"Nhập nội dung khác:",-1),oe=t("div",{class:"text-[16px] font-bold"},"Thêm hình ảnh bổ sung:",-1),se={class:"py-[12px]"},ne={class:"flex justify-center"},le=["src"],ae={class:"pb-[12px] pt-[8px]"},ie={class:"flex justify-end text-[14px] mr-[24px]"};function re(o,e,x,B,s,l){const p=h("el-checkbox"),F=h("el-input"),g=h("Plus"),b=h("el-icon"),k=h("el-upload"),C=h("el-dialog");return r(),U(C,{modelValue:s.dialogVisible,"onUpdate:modelValue":e[12]||(e[12]=a=>s.dialogVisible=a),id:"show-report-post",class:"bg-[#f4f1f8] max-h-[90%] overflow-scroll",width:"600px",style:{"margin-top":"2% !important"},"show-close":!0},{header:c(()=>[G]),footer:c(()=>[t("div",ae,[t("div",ie,[t("div",{onClick:e[10]||(e[10]=(...a)=>l.cancel&&l.cancel(...a)),class:"cursor-pointer flex justify-center items-center w-[110px] rounded-[4px] bg-[#ffffff] py-[4px] h-[32px] text-[15px] text-black border border-[#7d7f92]"}," Hủy bỏ "),t("div",{class:"cursor-pointer flex justify-center items-center w-[110px] ml-[18px] rounded-[4px] bg-[#007bff] py-[4px] h-[32px] text-[15px] text-white",onClick:e[11]||(e[11]=(...a)=>l.sendReport&&l.sendReport(...a))}," Xác nhận ")])])]),default:c(()=>[t("div",W,[t("div",J,[t("div",null,[Y,t("div",$,[i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[0]||(e[0]=a=>s.dataForm.content=a),label:"Spam",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[1]||(e[1]=a=>s.dataForm.content=a),label:"Chứa nội dung bạo lực",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[2]||(e[2]=a=>s.dataForm.content=a),label:"Ngôn từ gây thù ghét",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[3]||(e[3]=a=>s.dataForm.content=a),label:"Khủng bố",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[4]||(e[4]=a=>s.dataForm.content=a),label:"Thông tin sai sự thật",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[5]||(e[5]=a=>s.dataForm.content=a),label:"Quấy rối",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.isDefault,"onUpdate:modelValue":e[6]||(e[6]=a=>s.isDefault=a),label:"Khác",size:"large",border:""},null,8,["modelValue"]),s.isDefault?(r(),d("div",ee,[te,i(F,{modelValue:s.dataForm.defaultContent,"onUpdate:modelValue":e[7]||(e[7]=a=>s.dataForm.defaultContent=a),type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"Nhập nội dung"},null,8,["modelValue"])])):_("",!0)]),oe,t("div",se,[i(k,{"file-list":s.dataForm.images,"onUpdate:fileList":e[8]||(e[8]=a=>s.dataForm.images=a),"list-type":"picture-card","auto-upload":!1,multiple:!0,"on-preview":l.handlePictureCardPreview},{default:c(()=>[i(b,null,{default:c(()=>[i(g)]),_:1})]),_:1},8,["file-list","on-preview"]),i(C,{id:"showImage",modelValue:s.dialogVisiblePreview,"onUpdate:modelValue":e[9]||(e[9]=a=>s.dialogVisiblePreview=a)},{default:c(()=>[t("div",ne,[t("img",{class:"max-h-[500px] object-cover",src:s.dialogImageUrl,alt:"Preview Image"},null,8,le)])]),_:1},8,["modelValue"])])])])])]),_:1},8,["modelValue"])}const de=j(Z,[["render",re]]);const ce={components:{Link:R,Delete:S,Download:z,Plus:T,ZoomIn:E},data(){return{dialogVisible:!1,isDefault:!1,dialogVisiblePreview:!1,dialogImageUrl:"",postId:"",dataForm:{images:[],defaultContent:"",content:[]}}},watch:{dialogVisible(o){o==!1&&this.clearData()}},methods:{moment:D,clearData(){this.dataForm.images=[],this.dataForm.defaultContent="",this.dataForm.content=[],this.isDefault=!1,this.dialogVisiblePreview=!1,this.postId="",this.dialogImageUrl=""},async open(o){this.dialogVisible=!0,this.postId=o},handlePictureCardPreview(o){this.dialogImageUrl=o.url,this.dialogVisiblePreview=!0},async sendReport(){if(this.dataForm.content.length==0&&!this.dataForm.defaultContent)v({type:"warning",message:"Vui lòng chọn nội dung báo cáo vi phạm"});else{const o=new FormData;this.dataForm.content.push(this.dataForm.defaultContent),o.append("content",this.dataForm.content);for(let e of this.dataForm.images)o.append("images[]",e.raw);await f.post(route("report-account",this.postId),o).then(e=>{this.dialogVisible=!1,this.clearData(),v({type:"success",message:"Báo cáo vi phạm thành công"})}).catch(()=>{})}},cancel(){this.clearData(),this.dialogVisible=!1}}},me=t("div",{class:"text-center font-bold text-[18px]"}," Báo cáo vi phạm ",-1),pe={class:"flex mt-[38px]"},ue={class:"py-[12px] px-[32px]"},he=t("div",{class:"text-[16px] font-bold"},"Hãy chọn vấn đề:",-1),xe={class:"py-[12px]"},_e={key:0,class:"flex items-top mt-[4px]"},fe=t("span",{class:"ml-[12px] mt-[8px] w-[210px]"},"Nhập nội dung khác:",-1),ge=t("div",{class:"text-[16px] font-bold"},"Thêm hình ảnh bổ sung:",-1),be={class:"py-[12px]"},ve={class:"flex justify-center"},ye=["src"],Ce={class:"pb-[12px] pt-[8px]"},we={class:"flex justify-end text-[14px] mr-[24px]"};function Fe(o,e,x,B,s,l){const p=h("el-checkbox"),F=h("el-input"),g=h("Plus"),b=h("el-icon"),k=h("el-upload"),C=h("el-dialog");return r(),U(C,{modelValue:s.dialogVisible,"onUpdate:modelValue":e[12]||(e[12]=a=>s.dialogVisible=a),id:"show-report-account",class:"bg-[#f4f1f8] max-h-[90%] overflow-scroll",width:"600px",style:{"margin-top":"2% !important"},"show-close":!0},{header:c(()=>[me]),footer:c(()=>[t("div",Ce,[t("div",we,[t("div",{onClick:e[10]||(e[10]=(...a)=>l.cancel&&l.cancel(...a)),class:"cursor-pointer flex justify-center items-center w-[110px] rounded-[4px] bg-[#ffffff] py-[4px] h-[32px] text-[15px] text-black border border-[#7d7f92]"}," Hủy bỏ "),t("div",{class:"cursor-pointer flex justify-center items-center w-[110px] ml-[18px] rounded-[4px] bg-[#007bff] py-[4px] h-[32px] text-[15px] text-white",onClick:e[11]||(e[11]=(...a)=>l.sendReport&&l.sendReport(...a))}," Xác nhận ")])])]),default:c(()=>[t("div",pe,[t("div",ue,[t("div",null,[he,t("div",xe,[i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[0]||(e[0]=a=>s.dataForm.content=a),label:"Spam",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[1]||(e[1]=a=>s.dataForm.content=a),label:"Chứa nội dung bạo lực",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[2]||(e[2]=a=>s.dataForm.content=a),label:"Ngôn từ gây thù ghét",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[3]||(e[3]=a=>s.dataForm.content=a),label:"Khủng bố",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[4]||(e[4]=a=>s.dataForm.content=a),label:"Thông tin sai sự thật",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.dataForm.content,"onUpdate:modelValue":e[5]||(e[5]=a=>s.dataForm.content=a),label:"Quấy rối",size:"large",border:""},null,8,["modelValue"]),i(p,{class:"w-[100%] mb-[8px]",modelValue:s.isDefault,"onUpdate:modelValue":e[6]||(e[6]=a=>s.isDefault=a),label:"Khác",size:"large",border:""},null,8,["modelValue"]),s.isDefault?(r(),d("div",_e,[fe,i(F,{modelValue:s.dataForm.defaultContent,"onUpdate:modelValue":e[7]||(e[7]=a=>s.dataForm.defaultContent=a),type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"Nhập nội dung"},null,8,["modelValue"])])):_("",!0)]),ge,t("div",be,[i(k,{"file-list":s.dataForm.images,"onUpdate:fileList":e[8]||(e[8]=a=>s.dataForm.images=a),"list-type":"picture-card","auto-upload":!1,multiple:!0,"on-preview":l.handlePictureCardPreview},{default:c(()=>[i(b,null,{default:c(()=>[i(g)]),_:1})]),_:1},8,["file-list","on-preview"]),i(C,{id:"showImage",modelValue:s.dialogVisiblePreview,"onUpdate:modelValue":e[9]||(e[9]=a=>s.dialogVisiblePreview=a)},{default:c(()=>[t("div",ve,[t("img",{class:"max-h-[500px] object-cover",src:s.dialogImageUrl,alt:"Preview Image"},null,8,ye)])]),_:1},8,["modelValue"])])])])])]),_:1},8,["modelValue"])}const ke=j(ce,[["render",Fe]]);const Ve={components:{Link:R,Delete:S,Download:z,Plus:T,ZoomIn:E},data(){return{dialogVisible:!1,dataForm:{}}},watch:{dialogVisible(o){o==!1&&this.clearData()}},methods:{moment:D,clearData(){this.dataForm={}},async open(o){this.dialogVisible=!0,f.get(route("get-comment",o)).then(e=>{this.dataForm=e.data.data})},cancel(){this.dialogVisible=!1,this.dataForm={}},saveComment(){const o={content:this.dataForm.content};f.post(route("update-comment",this.dataForm.id),o).then(e=>{this.dialogVisible=!1,this.$emit("change-update"),v({type:"success",message:"Cập nhật bình luận thành công"})}).catch(e=>{v({type:"error",message:e.response.data.message})})}}},Pe=t("div",{class:"text-center font-bold text-[18px]"}," Chỉnh sửa bình luận ",-1),Ue={class:"mt-[38px]"},De={class:"py-[12px] px-[32px]"},Ie=t("div",{class:"text-[16px] font-bold"},"Bình luận:",-1),Le={class:"py-[12px] w-[100%]"},Re={class:"pb-[12px] pt-[8px]"},je={class:"flex justify-end text-[14px] mr-[24px]"};function Be(o,e,x,B,s,l){const p=h("el-input"),F=h("el-dialog");return r(),U(F,{modelValue:s.dialogVisible,"onUpdate:modelValue":e[3]||(e[3]=g=>s.dialogVisible=g),id:"show-edit-comment",class:"bg-[#f4f1f8] max-h-[90%] overflow-scroll",width:"620px",style:{"margin-top":"10% !important"},"show-close":!0},{header:c(()=>[Pe]),footer:c(()=>[t("div",Re,[t("div",je,[t("div",{onClick:e[1]||(e[1]=(...g)=>l.cancel&&l.cancel(...g)),class:"cursor-pointer flex justify-center items-center w-[110px] rounded-[4px] bg-[#ffffff] py-[4px] h-[32px] text-[15px] text-black border border-[#7d7f92]"}," Hủy bỏ "),t("div",{class:"cursor-pointer flex justify-center items-center w-[110px] ml-[18px] rounded-[4px] bg-[#007bff] py-[4px] h-[32px] text-[15px] text-white",onClick:e[2]||(e[2]=g=>l.saveComment())}," Xác nhận ")])])]),default:c(()=>[t("div",Ue,[t("div",De,[t("div",null,[Ie,t("div",Le,[i(p,{modelValue:s.dataForm.content,"onUpdate:modelValue":e[0]||(e[0]=g=>s.dataForm.content=g),type:"textarea",autosize:{minRows:4,maxRows:5},placeholder:"Nhập nội dung"},null,8,["modelValue"])])])])])]),_:1},8,["modelValue"])}const Se=j(Ve,[["render",Be]]);const ze={components:{AppLayout:q,Link:R,LoginForm:K,ShowFormReport:de,EditFormComment:Se,ShowFormReportUser:ke},data(){return{filters:{tabComment:"tab-0",page:0},dataForm:{id:"",title:"",slug:"",title:"",description:"",image:"",categorySlug:"",categoryName:"",is_save:!1,creator:"",creatorCode:"",created_at:"",updated_at:"",hagtags:[],hagtagNames:[]},listPostRelates:[],idOpenFormComment:"",contentComment:"",contentCommentChild:"",comments:[],comment:{},pageComment:6,totalcomment:0,nextComment:!1,isLoadPost:!0,number_data:6,errors:[]}},created(){this.fetchData(),document.title=this.$page.props.title},methods:{moment:D,async loadPost(){const o=await f.get(route("post.get-list-post-relate",{id:this.dataForm.id,number_data:this.number_data}));this.listPostRelates=o.data.data,o.data.meta.current_page===o.data.meta.last_page?this.isLoadPost=!1:this.number_data+=6},async fetchData(){const o=await f.get(route("post.get-post",this.$page.props.slug));this.dataForm=o.data.data,this.fetchDataComment(),this.loadPost()},async fetchDataComment(){const o=await f.get(route("get-comments",{id:this.dataForm.id,page_number:this.pageComment,comment_id:this.comment?this.comment.id:"",page_number_child:this.comment?Number(this.comment.page_number_comment_child)+6:""}));this.comments=o.data.data,this.totalcomment=0,o.data.data.forEach(e=>{this.totalcomment+=1+e.count_comment_child}),o.data.meta.last_page==o.data.meta.current_page?this.nextComment=!1:this.nextComment=!0},convertTime(o){const e=D(),x=D(o);if(e.diff(x,"years")>0)return`${e.diff(x,"years")} năm trước`;if(e.diff(x,"months")>0)return`${e.diff(x,"months")} tháng trước`;if(e.diff(x,"days")>0)return`${e.diff(x,"days")} ngày trước`;if(e.diff(x,"hours")>0)return`${e.diff(x,"hours")} giờ trước`;if(e.diff(x,"minutes")>0)return`${e.diff(x,"minutes")} phút trước`;if(e.diff(x,"seconds")>0)return`${e.diff(x,"seconds")} giây trước`},changeTabComment(o){this.filters.tabComment=o},sendComment(){if(this.$page.props.auth.account){const o={content:this.contentComment};f.post(route("create-comment",this.dataForm.id),o).then(e=>{v({showClose:!0,message:"Thêm bình luận thành công",type:"success"}),this.contentComment="",this.fetchDataComment()}).catch(e=>{this.errors=e.response.data.errors})}else this.$refs.loginForm.open()},loadComment(){this.pageComment+=2,this.fetchDataComment()},changeStatusLike(o){this.$page.props.auth.account?o.is_like_comment?f.get(route("unlike-comment",o.id)).then(e=>{this.fetchDataComment()}).catch(e=>{}):f.get(route("like-comment",o.id)).then(e=>{this.fetchDataComment()}).catch(e=>{}):this.$refs.loginForm.open()},login(){location.reload()},backPage(){history.back()},backHome(){window.location=route("home")},savePost(){this.$page.props.auth.account?this.dataForm.is_save?(f.get(route("unsave-post",this.dataForm.id)),this.dataForm.is_save=!1):(f.get(route("save-post",this.dataForm.id)),this.dataForm.is_save=!0):this.$refs.loginForm.open()},reportPost(){this.$page.props.auth.account?this.$refs.showFormReport.open(this.dataForm.id):this.$refs.loginForm.open()},openCommentForm(o){this.$page.props.auth.account?o==this.idOpenFormComment?(this.contentCommentChild="",this.errors=[],this.idOpenFormComment=""):(this.contentCommentChild="",this.idOpenFormComment=o):this.$refs.loginForm.open()},sendCommentChild(o){if(this.contentCommentChild){const e={content:this.contentCommentChild};f.post(route("create-comment-child",o),e).then(x=>{v({showClose:!0,message:"Thêm bình luận thành công",type:"success"}),this.contentCommentChild="",this.errors=[],this.fetchDataComment()}).catch(()=>{})}else this.errors.contentChild="Trường nội dung là bắt buộc"},loadCommentChild(o){this.comment=o,this.fetchDataComment()},openEditCommentForm(o){this.$refs.editFormComment.open(o.id)},reportUser(o){this.$page.props.auth.account?this.$refs.showFormReportUser.open(o.commentator_code):this.$refs.loginForm.open()},deleteComment(o){O.confirm("Bạn có muốn xóa bình luận vừa chọn không?","Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning"}).then(()=>{f.get(route("delete-comment",o.id)).then(()=>{this.fetchData(),v({type:"success",message:"Xóa bình luận thành công"})}).catch(e=>{v({type:"error",message:e.message})})})},openComment(o){document.getElementById(`${o}`).classList.toggle("comment-hidden"),document.getElementById(`${o}`).querySelector(".comment-icon").classList.toggle("bi-caret-up-fill")},loadMoreComment(o){document.getElementById(`${o}`).classList.toggle("comment-load-more"),document.getElementById(`${o}`).classList.contains("comment-load-more")?document.getElementById(`${o}`).querySelector(".comment-load-more-btn").textContent="Đọc thêm":document.getElementById(`${o}`).querySelector(".comment-load-more-btn").textContent="Ẩn bớt"},loadMoreCommentChild(o){document.getElementById(`${o}`).classList.toggle("comment-child-load-more"),document.getElementById(`${o}`).classList.contains("comment-child-load-more")?document.getElementById(`${o}`).querySelector(".comment-child-load-more-btn").textContent="Đọc thêm":document.getElementById(`${o}`).querySelector(".comment-child-load-more-btn").textContent="Ẩn bớt"}}},y=o=>(A("data-v-961c2db2"),o=o(),Q(),o),Te={class:"main mb-[24px] relative"},Ee={class:"py-[12px] px-[12px]"},Ne={class:"text-[22px] font-bold"},He={class:"flex items-center my-[12px]"},Me={class:"text-[16px] text-[#076db6] font-bold"},Xe={class:"creator text-[16px] font-bold text-[#333]"},qe={class:"text-[14px]"},Ke={class:"mt-[8px]"},Oe={class:"text-[16px] mb-[12px]"},Ae={class:"text-[14px] text-center italic mx-[24px]"},Qe=["innerHTML"],Ze={key:0,class:"mt-[42px]"},Ge=y(()=>t("span",{class:"text-[16px] font-bold"},"Hagtag: ",-1)),We={class:"mr-[8px] text-[16px] text-[#17a2b8]"},Je=["href"],Ye={class:"py-[12px] pt-[18px]"},$e={class:"font-bold text-[17px]"},et={class:"mt-[12px]"},tt={key:0,class:"mt-[5px] text-[#ff0000] text-[15px]"},ot={class:"flex justify-end mt-[18px] mr-[18px]"},st={class:"mt-[12px] pb-[18px]"},nt={class:"flex border-b-[1px] px-[4px]"},lt={class:"mt-[18px] mb-[52px] mx-[8px]"},at=["src"],it={key:1,class:"bg-[#5c6bc0] w-[46px] h-[46px] border-[1px] rounded-[50%] flex justify-center items-center"},rt={class:"text-[#fff] text-[14px]"},dt=["id"],ct={class:"font-bold text-[16px]"},mt={key:0},pt={key:1},ut={class:"text-[15px] whitespace-pre-line"},ht={class:"comment-content-cut"},xt={key:0,class:"text-[16px]"},_t={class:"comment-content-all"},ft=["onClick"],gt={class:"mt-[4px] text-[14px] text-[#9F9F9F] flex items-center"},bt={class:"cursor-pointer flex items-center"},vt=["onClick"],yt={key:0,class:"ml-[4px] mb-[2px]"},Ct=["onClick"],wt={class:"mb-[2px] text-[13px]"},Ft={key:0,class:"mt-[4px]"},kt=["onClick"],Vt=y(()=>t("i",{class:"comment-icon bi bi-caret-down-fill"},null,-1)),Pt=y(()=>t("span",{class:"ml-[6px] text-[15px]"},"Phản hồi",-1)),Ut=[Vt,Pt],Dt={class:"comment-item"},It={class:"flex mt-[8px] relative"},Lt=["src"],Rt={key:1,class:"bg-[#5c6bc0] w-[36px] h-[36px] border-[1px] rounded-[50%] flex justify-center items-center"},jt={class:"text-[#fff] text-[14px]"},Bt=["id"],St={class:"font-bold text-[15px]"},zt={key:0},Tt={key:1},Et={class:"text-[15px] whitespace-pre-line"},Nt={class:"comment-child-content-cut"},Ht={key:0,class:"text-[16px]"},Mt={class:"comment-child-content-all"},Xt=["onClick"],qt={class:"mt-[4px] text-[14px] text-[#9F9F9F] flex items-center"},Kt={class:"cursor-pointer flex items-center"},Ot=["onClick"],At={key:0,class:"ml-[4px] mb-[2px]"},Qt={class:"ml-[24px] mb-[2px] text-[13px]"},Zt={class:"btn absolute top-[-2px] right-[-52px] text-[24px] h-[36px] w-[36px] flex items-center justify-center text-center cursor-pointer rounded-[50%] hover:bg-[#e9ecef]"},Gt=y(()=>t("span",{class:"text-[24px]"},[t("i",{class:"bi bi-three-dots"})],-1)),Wt=["onClick"],Jt={class:"btn absolute top-[-2px] right-0 text-[24px] h-[36px] w-[36px] flex items-center justify-center text-center cursor-pointer rounded-[50%] hover:bg-[#e9ecef]"},Yt=y(()=>t("span",{class:"text-[24px]"},[t("i",{class:"bi bi-three-dots"})],-1)),$t={key:0,class:"comment-form absolute top-[100%] mt-[6px] left-[52px] right-0 bg-[#f8f9fa] z-50 border-[1px] p-[18px] rounded-[8px] box-shadow"},eo={class:"flex"},to=["src"],oo={key:1,class:"bg-[#5c6bc0] w-[36px] h-[36px] border-[1px] rounded-[50%] flex justify-center items-center"},so={class:"text-[#fff] text-[14px]"},no={class:"ml-[12px] flex-auto"},lo={key:0,class:"mt-[5px] text-[#ff0000] text-[15px]"},ao={class:"flex justify-end mt-[12px] mr-[18px]"},io=["onClick"],ro=["onClick"],co={key:1,class:"text-center my-[32px] text-[15px]"},mo={class:"absolute top-[18%] right-[100%]"},po={class:"mr-[12px]"},uo=y(()=>t("i",{class:"bi bi-house-door-fill"},null,-1)),ho=[uo],xo=y(()=>t("i",{class:"bi bi-bookmark-fill mt-[2px]"},null,-1)),_o=[xo],fo=y(()=>t("i",{class:"bi bi-flag-fill mt-[2px]"},null,-1)),go=[fo],bo=y(()=>t("i",{class:"bi bi-arrow-left mt-[2px]"},null,-1)),vo=[bo],yo={class:"main"},Co={class:"py-[12px] pt-[12px]"},wo=y(()=>t("div",{class:"heading mt-4px uppercase font-bold text-[#db562b]"}," Bài viết liên quan ",-1)),Fo={class:"mt-[18px] grid grid-cols-3 gap-3 mb-[18px]"},ko={class:"mt-[8px]"},Vo=["src"],Po={class:"px-[2px]"},Uo={class:"font-bold text-[15px] mt-[8px]"},Do={class:"flex items-center mt-[4px]"},Io={class:"text-[14px] font-bold text-[#076db6]"},Lo={class:"ml-[16px] text-[13px] mt-[4px]"};function Ro(o,e,x,B,s,l){const p=h("Link"),F=h("el-image"),g=h("el-input"),b=h("el-dropdown-item"),k=h("el-dropdown-menu"),C=h("el-dropdown"),a=h("LoginForm"),N=h("ShowFormReport"),H=h("EditFormComment"),M=h("ShowFormReportUser"),X=h("AppLayout");return r(),U(X,null,{"main-1":c(()=>[t("div",Te,[t("div",Ee,[t("div",Ne,u(s.dataForm.title),1),t("div",He,[i(p,{href:o.route("list-category",s.dataForm.categorySlug)},{default:c(()=>[t("div",Me,u(s.dataForm.categoryName),1)]),_:1},8,["href"]),i(p,{href:o.route("creator",s.dataForm.creatorCode)},{default:c(()=>[t("div",Xe,u(s.dataForm.creator),1)]),_:1},8,["href"]),t("div",qe,u(l.convertTime(s.dataForm.created_at)),1)]),t("div",Ke,[t("div",Oe,u(s.dataForm.description),1),i(F,{style:{width:"100%",height:"100%"},src:s.dataForm.image,"zoom-rate":1.2,"preview-teleported":"true","hide-on-click-modal":"true","preview-src-list":[s.dataForm.image],"initial-index":1,fit:"cover"},null,8,["src","zoom-rate","preview-src-list"]),t("div",Ae,u(s.dataForm.description),1)]),t("div",{innerHTML:s.dataForm.content,class:"mt-[12px] text-[16px] mb-[18px]"},null,8,Qe),s.dataForm.hagtagNames.length>0?(r(),d("div",Ze,[Ge,(r(!0),d(V,null,L(s.dataForm.hagtagNames,n=>(r(),d("span",We,[t("a",{href:o.route("list-post-hagtag",n.slug)},u(n.name),9,Je)]))),256))])):_("",!0)]),t("div",Ye,[t("div",$e,"Bình luận ("+u(s.totalcomment)+")",1),t("div",et,[i(g,{modelValue:s.contentComment,"onUpdate:modelValue":e[0]||(e[0]=n=>s.contentComment=n),type:"textarea",autosize:{minRows:3,maxRows:4},placeholder:"Nhập bình luận của bạn"},null,8,["modelValue"]),s.errors.content?(r(),d("div",tt,u(s.errors.content[0]),1)):_("",!0),t("div",ot,[t("div",{class:"btn border-[1px] px-[16px] py-[8px] bg-[#2877af] text-white text-[14px] cursor-pointer rounded-[4px] active:scale-95",onClick:e[1]||(e[1]=(...n)=>l.sendComment&&l.sendComment(...n))}," Gửi bình luận ")])]),t("div",st,[t("div",nt,[t("div",{class:P(["mr-[24px] text-[15px] font-bold cursor-pointer",{"active-comment":s.filters.tabComment=="tab-0"}]),onClick:e[2]||(e[2]=n=>l.changeTabComment("tab-0"))},"Mới nhất",2),t("div",{class:P(["text-[15px] font-bold cursor-pointer",{"active-comment":s.filters.tabComment=="tab-1"}]),onClick:e[3]||(e[3]=n=>l.changeTabComment("tab-1"))},"Quan tâm nhất",2)]),t("div",lt,[s.comments.length>0?(r(!0),d(V,{key:0},L(s.comments,n=>(r(),d("div",{class:P(["relative flex mb-[20px]",{"comment-active mb-[200px]":s.idOpenFormComment==n.id}])},[i(p,{href:o.route("creator",n.commentator_code)},{default:c(()=>[n.commentator_image?(r(),d("img",{key:0,src:n.commentator_image,alt:"",class:"w-[46px] min-w-[46px] h-[46px] rounded-[50%]"},null,8,at)):(r(),d("div",it,[t("span",rt,u(n.commentator[0]),1)]))]),_:2},1032,["href"]),t("div",{id:n.id,class:"relative ml-[12px] mt-[-4px] pr-[52px] comment-load-more comment-hidden"},[t("span",ct,[i(p,{href:o.route("creator",n.commentator_code)},{default:c(()=>[s.dataForm.creatorCode==n.commentator_code?(r(),d("span",mt,"Tác giả: ")):(r(),d("span",pt,u(n.commentator)+": ",1))]),_:2},1032,["href"])]),t("span",ut,[t("span",ht,[w(u(n.content.substring(0,220))+" ",1),n.content.length>220?(r(),d("span",xt,"...")):_("",!0)]),t("span",_t,u(n.content),1),n.content.length>220?(r(),d("div",{key:0,onClick:m=>l.loadMoreComment(n.id),class:"comment-load-more-btn font-bold text-[#495057] text-[14px] mt-[4px] mb-[6px] cursor-pointer"}," Đọc thêm ",8,ft)):_("",!0)]),t("div",gt,[t("span",bt,[t("i",{class:P(["bi bi-hand-thumbs-up-fill hover:text-[red] text-[18px]",{"text-[#0d6efd]":n.is_like_comment}]),onClick:m=>l.changeStatusLike(n)},null,10,vt),n.count_like_comment>0?(r(),d("span",yt,u(n.count_like_comment),1)):_("",!0)]),t("span",{class:"mx-[24px] mb-[2px] hover:text-[red] cursor-pointer",onClick:m=>l.openCommentForm(n.id)}," Trả lời ",8,Ct),t("span",wt,u(l.convertTime(n.created_at)),1)]),n.count_comment_child!=0?(r(),d("div",Ft,[t("div",{class:"text-[17px] text-[#065fd4] px-[12px] h-[36px] leading-[36px] text-center border-[2px] ml-[-24px] border-[#fff] w-[130px] rounded-[18px] cursor-pointer hover:bg-[#f2f8ff] hover:border-[#e9ecef] btn",onClick:m=>l.openComment(n.id)},Ut,8,kt),t("div",Dt,[n.comment_child.length>0?(r(!0),d(V,{key:0},L(n.comment_child,m=>(r(),d("div",It,[i(p,{href:o.route("creator",m.commentator_code)},{default:c(()=>[m.commentator_image?(r(),d("img",{key:0,src:m.commentator_image,alt:"",class:"w-[36px] min-w-[36px] h-[36px] rounded-[50%]"},null,8,Lt)):(r(),d("div",Rt,[t("span",jt,u(m.commentator[0]),1)]))]),_:2},1032,["href"]),t("div",{id:m.id,class:"ml-[12px] mt-[-4px] comment-child-load-more"},[t("span",St,[i(p,{href:o.route("creator",m.commentator_code)},{default:c(()=>[s.dataForm.creatorCode==m.commentator_code?(r(),d("span",zt,"Tác giả: ")):(r(),d("span",Tt,u(m.commentator)+": ",1))]),_:2},1032,["href"])]),t("span",Et,[t("span",Nt,[w(u(m.content.substring(0,220))+" ",1),m.content.length>220?(r(),d("span",Ht,"...")):_("",!0)]),t("span",Mt,u(m.content),1),m.content.length>220?(r(),d("div",{key:0,onClick:I=>l.loadMoreCommentChild(m.id),class:"comment-child-load-more-btn font-bold text-[#495057] text-[14px] mt-[4px] mb-[6px] cursor-pointer"}," Đọc thêm ",8,Xt)):_("",!0)]),t("div",qt,[t("span",Kt,[t("i",{class:P(["bi bi-hand-thumbs-up-fill hover:text-[red] text-[18px]",{"text-[#0d6efd]":m.is_like_comment}]),onClick:I=>l.changeStatusLike(m)},null,10,Ot),m.count_like_comment>0?(r(),d("span",At,u(m.count_like_comment),1)):_("",!0)]),t("span",Qt,u(l.convertTime(m.created_at)),1)])],8,Bt),t("div",Zt,[i(C,null,{dropdown:c(()=>[i(k,null,{default:c(()=>[this.$page.props.auth.account&&m.commentator_code==this.$page.props.auth.account.code?(r(),d(V,{key:0},[i(b,{onClick:I=>l.openEditCommentForm(m)},{default:c(()=>[w(" Chỉnh sửa ")]),_:2},1032,["onClick"]),i(b,{onClick:I=>l.deleteComment(m)},{default:c(()=>[w(" Xóa bình luận ")]),_:2},1032,["onClick"])],64)):(r(),U(b,{key:1,onClick:I=>l.reportUser(m)},{default:c(()=>[w(" Báo cáo vi phạm ")]),_:2},1032,["onClick"]))]),_:2},1024)]),default:c(()=>[Gt]),_:2},1024)])]))),256)):_("",!0),n.is_load_comment_child?(r(),d("div",{key:1,class:"ml-[48px] text-[15px] mt-[4px] cursor-pointer text-[#065fd4] btn",onClick:m=>l.loadCommentChild(n)}," Đọc thêm ",8,Wt)):_("",!0)])])):_("",!0),t("div",Jt,[i(C,null,{dropdown:c(()=>[i(k,null,{default:c(()=>[this.$page.props.auth.account&&n.commentator_code==this.$page.props.auth.account.code?(r(),d(V,{key:0},[i(b,{onClick:m=>l.openEditCommentForm(n)},{default:c(()=>[w(" Chỉnh sửa ")]),_:2},1032,["onClick"]),i(b,{onClick:m=>l.deleteComment(n)},{default:c(()=>[w(" Xóa bình luận ")]),_:2},1032,["onClick"])],64)):(r(),U(b,{key:1,onClick:m=>l.reportUser(n)},{default:c(()=>[w(" Báo cáo vi phạm ")]),_:2},1032,["onClick"]))]),_:2},1024)]),default:c(()=>[Yt]),_:2},1024)])],8,dt),this.$page.props.auth.account?(r(),d("div",$t,[t("div",eo,[this.$page.props.auth.account.image?(r(),d("img",{key:0,src:this.$page.props.auth.account.image,alt:"",class:"w-[36px] min-w-[36px] h-[36px] rounded-[50%]"},null,8,to)):(r(),d("div",oo,[t("span",so,u(this.$page.props.auth.account.first_name[0]),1)])),t("div",no,[i(g,{modelValue:s.contentCommentChild,"onUpdate:modelValue":e[4]||(e[4]=m=>s.contentCommentChild=m),autosize:{minRows:3,maxRows:3},type:"textarea",placeholder:"Nhập bình luận"},null,8,["modelValue"]),s.errors.contentChild?(r(),d("div",lo,u(s.errors.contentChild),1)):_("",!0)])]),t("div",ao,[t("div",{class:"btn border-[1px] border-[#adb5bd] px-[32px] py-[8px] bg-[#fff] text-[14px] cursor-pointer rounded-[4px] active:scale-95 mr-[18px]",onClick:m=>l.openCommentForm(n.id)}," Đóng ",8,io),t("div",{class:"btn border-[1px] px-[16px] py-[8px] bg-[#2877af] text-white text-[14px] cursor-pointer rounded-[4px] active:scale-95",onClick:m=>l.sendCommentChild(n.id)}," Gửi bình luận ",8,ro)])])):_("",!0)],2))),256)):(r(),d("div",co,"Không có bình luận, hãy là người bình luận đầu tiên"))]),s.nextComment?(r(),d("div",{key:0,class:"btn mt-[28px] mx-[8px] border-[1px] border-[#adb5bd] text-center py-[12px] cursor-pointer text-[17px] active:bg-[#eff1f3]",onClick:e[5]||(e[5]=(...n)=>l.loadComment&&l.loadComment(...n))}," Xem thêm bình luận ")):_("",!0)])]),t("div",mo,[t("div",po,[t("div",{class:"rounded-[50%] w-[36px] h-[36px] bg-[#fff] box-shadow flex justify-center items-center text-[22px] text-[#6c757d] cursor-pointer hover:text-[#17a2b8] hover:scale-[1.1]",onClick:e[6]||(e[6]=(...n)=>l.backHome&&l.backHome(...n))},ho),t("div",{class:P(["mt-[12px] rounded-[50%] w-[36px] h-[36px] bg-[#fff] box-shadow flex justify-center items-center text-[19px] text-[#6c757d] cursor-pointer hover:text-[#17a2b8] hover:scale-[1.1]",{"text-[red]":s.dataForm.is_save}]),onClick:e[7]||(e[7]=(...n)=>l.savePost&&l.savePost(...n))},_o,2),t("div",{class:"mt-[12px] rounded-[50%] w-[36px] h-[36px] bg-[#fff] box-shadow flex justify-center items-center text-[19px] text-[#6c757d] cursor-pointer hover:text-[#17a2b8] hover:scale-[1.1]",onClick:e[8]||(e[8]=(...n)=>l.reportPost&&l.reportPost(...n))},go),t("div",{class:"mt-[12px] rounded-[50%] w-[36px] h-[36px] bg-[#fff] box-shadow flex justify-center items-center text-[19px] text-[#6c757d] cursor-pointer hover:text-[#17a2b8] hover:scale-[1.1]",onClick:e[9]||(e[9]=(...n)=>l.backPage&&l.backPage(...n))},vo)])])]),t("div",yo,[t("div",Co,[wo,t("div",Fo,[(r(!0),d(V,null,L(s.listPostRelates,n=>(r(),d("div",ko,[i(p,{href:o.route("post",n.slug)},{default:c(()=>[t("img",{src:n.image,class:"h-[200px] object-cover w-[100%] post-image"},null,8,Vo)]),_:2},1032,["href"]),t("div",Po,[i(p,{href:o.route("post",n.slug)},{default:c(()=>[t("div",Uo,u(n.title),1)]),_:2},1032,["href"]),t("div",Do,[i(p,{href:o.route("list-category",n.categorySlug)},{default:c(()=>[t("div",Io,u(n.categoryName),1)]),_:2},1032,["href"]),t("div",Lo,u(l.convertTime(n.created_at)),1)])])]))),256))]),s.isLoadPost?(r(),d("div",{key:0,class:"btn mt-[28px] mx-[8px] border-[1px] border-[#adb5bd] py-[8px] flex justify-center cursor-pointer text-[15px] active:bg-[#eff1f3]",onClick:e[10]||(e[10]=(...n)=>l.loadPost&&l.loadPost(...n))}," Xem thêm bài viết ")):_("",!0)])]),i(a,{ref:"loginForm",onLogin:l.login},null,8,["onLogin"]),i(N,{ref:"showFormReport"},null,512),i(H,{ref:"editFormComment",onChangeUpdate:l.fetchDataComment},null,8,["onChangeUpdate"]),i(M,{ref:"showFormReportUser",onChangeUpdate:l.fetchDataComment},null,8,["onChangeUpdate"])]),_:1})}const Eo=j(ze,[["render",Ro],["__scopeId","data-v-961c2db2"]]);export{Eo as default};
