import{A}from"./AppLayoutAdmin-f23b16b5.js";import{i as T,j as h,E as F,k as B,l as n,o as p,c as u,w as c,a,b as l,e as m,g as L,F as P,m as R,t as Y,h as M}from"./app-c5eb5df1.js";import{D as E}from"./DataTable-8bfe0c83.js";import{P as N}from"./Paginate-192a713f.js";import U from"./ShowReport-f5ab1c34.js";import j from"./ChangeStatusForm-49596d65.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-7eaaec51.js";import"./moment-fbc5633a.js";const K={components:{AppLayoutAdmin:A,Link:T,Paginate:N,DataTable:E,ShowReportForm:U,ShowChangeStatustForm:j},data(){return{tab:"tab-0",fields:[{key:"account_name",label:"Tài khoản",align:"center",sortable:!0},{key:"account_email",label:"Email",align:"center",sortable:!0},{key:"account_status",label:"Trạng thái",align:"center",width:150},{key:"count_report",label:"Số lượng",align:"center",sortable:!0,width:160},{key:"options",label:"Tùy chỉnh",align:"center",width:95}],options:[10,20,30],filterSearch:{limit:10,date:"",search:"",page:1},paginate:[],tableData:[],selectedValue:[]}},created(){this.fetchData(),document.title="Quản lý báo cáo người dùng - Admin hệ thống"},methods:{clearFilter(){this.filterSearch.page=1,this.filterSearch.type="0",this.filterSearch.search="",this.filterSearch.limit=10,this.paginate=[],this.tableData=[]},async fetchData(){const o={...this.filterSearch},t=await h.get(route("admin.report-accounts.list-top",o));this.tableData=t.data.data,this.paginate=t.data.meta},handleCurrentPage(o){this.filterSearch.page=o,this.fetchData()},handleSelectionChange(o){this.selectedValue=o},deleteAccount(o){F.confirm(`Bạn có muốn xoá tài khoản ${o.account_email} không?`,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{h.delete(route("admin.users.destroy",o.account_id)).then(t=>{this.fetchData(),B({type:"success",message:"Xóa tài khoản thành công"})})}).catch(()=>{})},changeStatusAccount(o){this.$refs.showChangeStatusForm.open(o)}}},H=a("div",{class:"mt-[12px] flex text-[18px] font-bold uppercase"}," Danh sách báo cáo vi phạm ",-1),Q={class:"mt-[12px] flex items-center text-[15px] border-b-[3px] border-b-[#adb5bd]"},W=a("div",{class:"w-[120px] text-center py-[6px] cursor-pointer bg-[#495057] text-white"}," Người dùng ",-1),q=a("div",{class:"w-[120px] text-center py-[6px] cursor-pointer"}," Bài viết ",-1),z={class:"my-[18px]"},G={class:"mb-[18px] flex items-center"},I={class:"mx-[28px]"},J={class:"text-left hover:text-[blue]"},O={class:"h-[36px] flex justify-center items-center"},Z={class:"flex justify-center items-center"},$=a("span",{class:"p-[4px] text-[20px] cursor-pointer outline-none"},[a("i",{class:"bi bi-gear-fill"})],-1),ee=a("div",{class:"w-[130px]"}," Xóa tài khoản ",-1),te=a("div",{class:"w-[130px]"}," Thay đổi trạng thái ",-1),ne={key:0,class:"flex justify-end mt-[32px] mr-[16px]"};function ae(o,t,oe,le,s,i){const _=n("Link"),f=n("el-option"),g=n("el-select"),x=n("el-date-picker"),b=n("el-input"),w=n("el-switch"),d=n("el-dropdown-item"),S=n("el-dropdown-menu"),v=n("el-dropdown"),y=n("DataTable"),k=n("Paginate"),C=n("ShowReportForm"),D=n("ShowChangeStatustForm"),V=n("AppLayoutAdmin");return p(),u(V,{currentTab:"tab-5",currentTabChild:"tab-2"},{"main-full":c(()=>[H,a("div",Q,[W,l(_,{href:o.route("admin.list-report-post-top")},{default:c(()=>[q]),_:1},8,["href"])]),a("div",z,[a("div",G,[l(g,{modelValue:s.filterSearch.limit,"onUpdate:modelValue":t[0]||(t[0]=e=>s.filterSearch.limit=e),class:"max-w-[60px] ml-[8px]",onChange:t[1]||(t[1]=e=>i.fetchData())},{default:c(()=>[(p(!0),m(P,null,L(s.options,e=>(p(),u(f,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a("div",I,[l(x,{modelValue:s.filterSearch.date,"onUpdate:modelValue":t[2]||(t[2]=e=>s.filterSearch.date=e),type:"month",class:"max-w-[280px]",placeholder:"Chọn theo tháng năm",format:"MM-YYYY","value-format":"DD-MM-YYYY",onChange:t[3]||(t[3]=e=>i.fetchData())},null,8,["modelValue"])]),l(b,{class:"max-w-[300px]",modelValue:s.filterSearch.search,"onUpdate:modelValue":t[4]||(t[4]=e=>s.filterSearch.search=e),placeholder:"Nhập từ khóa",clearable:"",onKeyup:t[5]||(t[5]=R(e=>i.fetchData(),["enter"]))},null,8,["modelValue"])]),l(y,{fields:s.fields,items:s.tableData,"enable-select-box":"",onRowSelected:i.handleSelectionChange},{account_email:c(({row:e})=>[a("div",J,Y(e.account_email),1)]),account_status:c(({row:e})=>[a("div",O,[l(w,{modelValue:e.account_status,"onUpdate:modelValue":r=>e.account_status=r,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"inline-prompt":"","active-text":"Activated","inactive-text":"Deactivated",disabled:"",onClick:r=>o.changeStatus(e)},null,8,["modelValue","onUpdate:modelValue","onClick"])])]),options:c(({row:e})=>[a("div",Z,[l(v,null,{dropdown:c(()=>[l(S,null,{default:c(()=>[l(d,{onClick:r=>i.deleteAccount(e)},{default:c(()=>[ee]),_:2},1032,["onClick"]),l(d,{onClick:r=>i.changeStatusAccount(e)},{default:c(()=>[te]),_:2},1032,["onClick"])]),_:2},1024)]),default:c(()=>[$]),_:2},1024)])]),_:1},8,["fields","items","onRowSelected"]),s.tableData.length!=0?(p(),m("div",ne,[l(k,{onPageChange:i.handleCurrentPage,paginate:s.paginate,"current-page":s.filterSearch.page||1,"paginate-background":""},null,8,["onPageChange","paginate","current-page"])])):M("",!0)]),l(C,{ref:"showReportForm"},null,512),l(D,{ref:"showChangeStatusForm",onChangeAccount:t[6]||(t[6]=e=>i.fetchData())},null,512)]),_:1})}const _e=X(K,[["render",ae]]);export{_e as default};
