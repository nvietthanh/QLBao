import{A as L}from"./AppLayout-06d5a6f0.js";import{N as T}from"./Navigation-4644ef19.js";import{P as A}from"./Paginate-192a713f.js";import{i as E,k as P,l as p,o as i,c as _,w as d,a as t,b as c,n as w,e as l,g as u,F as x,t as h,h as g}from"./app-c5eb5df1.js";import j from"./ShowPost-fc11846e.js";import B from"./AddPost-996dcebc.js";import K from"./EditPost-2e8b9c72.js";import{h as b}from"./moment-fbc5633a.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-7eaaec51.js";import"./Ckeditor-04e30514.js";const z={components:{AppLayout:L,Navigation:T,Paginate:A,ShowPostForm:j,AddPostForm:B,EditPostForm:K,Link:E},data(){return{currentTab:"tab-2",options:[15,21,25],tab:"tab-0",filter:{limit:15,categorySelect:[],search:"",page:1,is_approved:!0},paginate:[],postsData:[]}},created(){this.fetchData(),document.title="Danh sách bài viết"},methods:{moment:b,async fetchData(){const o={...this.filter},s=await axios.get(route("creator.posts.index",o));this.postsData=s.data.data,this.paginate=s.data.meta},handleCurrentPage(o){this.filter.page=o,this.fetchData()},showPost(o){this.$refs.showPostForm.open(o)},addPost(){this.$refs.formPostForm.open()},editPost(o){this.$refs.editPostForm.open(o.id)},changeSearch(){this.fetchData()},changeTab(o){this.tab=o,o=="tab-0"?this.filter.is_approved=!0:this.filter.is_approved=!1,this.filter.limit=15,this.filter.categorySelect=[],this.filter.search="",this.filter.page=1,this.filter.paginate=[],this.postsData=[],this.fetchData()},deletePost(o){axios.delete(route("creator.posts.destroy",o.id)).then(s=>{this.fetchData(),P({showClose:!0,message:"Xóa bài viết thành công",type:"success"})}).catch(s=>{P({showClose:!0,message:s.response.data.message,type:"error"})})},convertTime(o){const s=b(),n=b(o);if(s.diff(n,"years")>0)return`${s.diff(n,"years")} năm trước`;if(s.diff(n,"months")>0)return`${s.diff(n,"months")} tháng trước`;if(s.diff(n,"days")>0)return`${s.diff(n,"days")} ngày trước`;if(s.diff(n,"hours")>0)return`${s.diff(n,"hours")} giờ trước`;if(s.diff(n,"minutes")>0)return`${s.diff(n,"minutes")} phút trước`;if(s.diff(n,"seconds")>0)return`${s.diff(n,"seconds")} giây trước`}}},M={class:"min-w-[280px] w-[280px]"},X={class:"flex-auto ml-[16px]"},q={class:"py-[20px] bg-[#fff] box-shadow"},G=t("div",{class:"border-b-[2px]"},[t("div",{class:"border-l-[5px] border-[#db562b] text-[#db562b] font-bold ml-[8px] pl-[8px] mb-[12px] text-[17px]"}," Danh sách bài viết của bạn ")],-1),H={class:"flex mx-[12px] mt-[14px] mb-[24px] text-[15px] font-bold"},I={class:"mt-[12px] mx-[12px] flex justify-between items-center text-[16px]"},J={class:"flex"},O={class:"flex items-center"},Q={key:0,class:"text-center text-[16px] mt-[32px] mb-[28px] mb-[6px]"},R={key:0,class:"mt-[12px] mb-[16px] mx-[12px] grid grid-cols-3 gap-3"},W={class:"mt-[8px] relative post-item"},Y=["src"],Z={class:"px-[2px]"},$={class:"post-title font-bold text-[15px] mt-[8px]"},ee={class:"flex items-center mt-[8px]"},te={class:"text-[14px] font-bold text-[#076db6]"},se={class:"ml-[16px] text-[13px] mt-[4px]"},oe=["onClick"],re=t("i",{class:"bi bi-eye"},null,-1),ae=[re],ie=["onClick"],ne=t("i",{class:"bi bi-pen mb-[4px]"},null,-1),le=[ne],ce={key:1,class:"mt-[12px] mb-[16px] mx-[12px] grid grid-cols-3 gap-3"},pe={class:"mt-[8px] relative post-item"},de=["src"],he={class:"px-[2px]"},xe={class:"post-title font-bold text-[15px] mt-[8px]"},fe={class:"flex items-center mt-[12px]"},me={class:"text-[14px] font-bold text-[#076db6]"},ue={class:"ml-[16px] text-[13px] mt-[4px]"},_e=["onClick"],ge=t("i",{class:"bi bi-eye"},null,-1),be=[ge],ve=["onClick"],ye=t("i",{class:"bi bi-pen mb-[4px]"},null,-1),Pe=[ye],we=["onClick"],Ce=t("i",{class:"bi bi-trash"},null,-1),ke=[Ce],De={class:"flex mt-[24px] mb-[64px] justify-center"};function Fe(o,s,n,Se,r,a){const C=p("Navigation"),v=p("el-option"),y=p("el-select"),k=p("el-input"),f=p("Link"),D=p("Paginate"),F=p("ShowPostForm"),S=p("AddPostForm"),V=p("EditPostForm"),N=p("AppLayout");return i(),_(N,{"current-tab":"main-full"},{"main-full":d(()=>[t("div",M,[c(C,{currentTab:"tab-4"})]),t("div",X,[t("div",q,[G,t("div",H,[t("div",{class:w(["w-[130px] border-[2px] text-center py-[6px] rounded-[4px] border-[#dee2e6] cursor-pointer",{"bg-[#17a2b8] text-white":r.tab=="tab-0"}]),onClick:s[0]||(s[0]=e=>a.changeTab("tab-0"))}," Đã duyệt ",2),t("div",{class:w(["ml-[8px] w-[130px] border-[2px] text-center py-[6px] rounded-[4px] border-[#dee2e6] cursor-pointer",{"bg-[#17a2b8] text-white":r.tab=="tab-1"}]),onClick:s[1]||(s[1]=e=>a.changeTab("tab-1"))}," Chưa duyệt ",2)]),t("div",I,[t("div",J,[t("div",O,[c(y,{modelValue:r.filter.limit,"onUpdate:modelValue":s[2]||(s[2]=e=>r.filter.limit=e),class:"max-w-[60px] ml-[8px]",onChange:a.changeSearch},{default:d(()=>[(i(!0),l(x,null,u(r.options,e=>(i(),_(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),c(y,{class:"ml-[18px]",modelValue:r.filter.categorySelect,"onUpdate:modelValue":s[3]||(s[3]=e=>r.filter.categorySelect=e),placeholder:"Chọn danh mục",multiple:"","multiple-limit":"2",clearable:"",onChange:a.changeSearch},{default:d(()=>[(i(!0),l(x,null,u(this.$page.props.categories,e=>(i(),_(v,{key:e.slug,label:e.name,value:e.slug},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),c(k,{class:"ml-[20px] min-w-[270px]",modelValue:r.filter.search,"onUpdate:modelValue":s[4]||(s[4]=e=>r.filter.search=e),placeholder:"Nhập từ khóa",clearable:"",onKeyup:a.changeSearch},null,8,["modelValue","onKeyup"])])]),t("div",{class:"border-[2px] px-[12px] rounded-[4px] cursor-pointer mr-[2px] bg-[#198754] text-[15px] text-[#fff] active:scale-95 h-[36px] leading-[34px]",onClick:s[5]||(s[5]=e=>a.addPost())}," Thêm bài viết ")]),r.postsData.length==0?(i(),l("div",Q," Không có bài viết nào ")):(i(),l(x,{key:1},[r.filter.is_approved?(i(),l("div",R,[(i(!0),l(x,null,u(r.postsData,e=>(i(),l("div",W,[c(f,{href:o.route("post",e.slug)},{default:d(()=>[t("img",{src:e.image,alt:"",class:"post-image w-[100%] h-[150px] object-cover"},null,8,Y)]),_:2},1032,["href"]),t("div",Z,[c(f,{href:o.route("post",e.slug)},{default:d(()=>[t("div",$,h(e.title),1)]),_:2},1032,["href"]),t("div",ee,[c(f,{href:o.route("list-category",e.categorySlug)},{default:d(()=>[t("div",te,h(e.categoryName),1)]),_:2},1032,["href"]),t("div",se,h(a.convertTime(e.created_at)),1)])]),t("div",{class:"post-icon absolute top-[8px] right-[8px] h-[24px] w-[28px] text-center cursor-pointer bg-[#fff] rounded-[4px] box-shadow text-[18px] active:scale-95 hover:bg-[#ced4da]",onClick:m=>a.showPost(e)},ae,8,oe),r.filter.is_approved?g("",!0):(i(),l("div",{key:0,class:"post-icon absolute top-[38px] right-[8px] h-[24px] w-[28px] text-center pt-[3px] cursor-pointer bg-[#fff] rounded-[4px] box-shadow text-[14px] active:scale-95 hover:bg-[#ced4da]",onClick:m=>a.editPost(e)},le,8,ie))]))),256))])):(i(),l("div",ce,[(i(!0),l(x,null,u(r.postsData,e=>(i(),l("div",pe,[t("img",{src:e.image,alt:"",class:"post-image w-[100%] h-[150px] object-cover"},null,8,de),t("div",he,[t("div",xe,h(e.title),1),t("div",fe,[c(f,{href:o.route("list-category",e.categorySlug)},{default:d(()=>[t("div",me,h(e.categoryName),1)]),_:2},1032,["href"]),t("div",ue,h(a.convertTime(e.created_at)),1)])]),t("div",{class:"post-icon absolute top-[8px] right-[8px] h-[24px] w-[28px] text-center cursor-pointer bg-[#fff] rounded-[4px] box-shadow text-[18px] active:scale-95 hover:bg-[#ced4da]",onClick:m=>a.showPost(e)},be,8,_e),r.filter.is_approved?g("",!0):(i(),l("div",{key:0,class:"post-icon absolute top-[38px] right-[8px] h-[24px] w-[28px] text-center pt-[3px] cursor-pointer bg-[#fff] rounded-[4px] box-shadow text-[14px] active:scale-95 hover:bg-[#ced4da]",onClick:m=>a.editPost(e)},Pe,8,ve)),r.filter.is_approved?g("",!0):(i(),l("div",{key:1,class:"post-icon absolute top-[8px] left-[6px] h-[28px] w-[28px] text-center pt-[4px] cursor-pointer bg-[#fff] rounded-[50%] box-shadow text-[17px] active:scale-95 hover:bg-[#ced4da]",onClick:m=>a.deletePost(e)},ke,8,we))]))),256))])),t("div",De,[c(D,{onPageChange:a.handleCurrentPage,paginate:r.paginate,"current-page":r.filter.page||1,"paginate-background":""},null,8,["onPageChange","paginate","current-page"])])],64))])]),c(F,{ref:"showPostForm"},null,512),c(S,{ref:"formPostForm",onChangePost:a.fetchData},null,8,["onChangePost"]),c(V,{ref:"editPostForm",onChangePost:a.fetchData},null,8,["onChangePost"])]),_:1})}const Me=U(z,[["render",Fe]]);export{Me as default};
