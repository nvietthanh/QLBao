import{A as P}from"./AppLayout-06d5a6f0.js";import{i as I,E as V,B as u,k as C,l as m,o as r,c as E,w as g,a as s,b as n,t as _,e as p,n as h,h as b,M as S,N as B,_ as T,$ as j,f as v}from"./app-c5eb5df1.js";import{N}from"./Navigation-4644ef19.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-7eaaec51.js";import"./moment-fbc5633a.js";const M={components:{AppLayout:P,Link:I,Navigation:N},data(){return{currentTab:"tab-0",isEditProfile:!1,imageSelected:"",fileImage:"",formData:{id:"",first_name:"",last_name:"",date_of_birth:new Date,male:"",phone:"",image:"",description:"",remark:""}}},created(){this.fetchData(),document.title="Quản lý thông tin cá nhân"},methods:{async fetchData(){this.isEditProfile=!1,await axios.get(route("profiles.index")).then(a=>{this.formData=a.data.data}).catch(()=>{})},cancel(){this.fetchData(),this.imageSelected="",this.fileImage="",this.isEditProfile=!1},editProfile(){this.isEditProfile=!0},changeImage(){this.isEditProfile&&this.$refs.file.click()},deleteImage(){this.formData.image&&!this.imageSelected?this.formData.image="":(this.imageSelected="",this.fileImage="")},async handleUploadContent(a){try{const e=a.target.files||a.dataTransfer.files;if(!e.length)return;if(e[0].size>5*1024*1024)return this.$message.warning(this.$i18n.t("File quá lớn, dung lượng tối đa cho phép 5MB")),!1;const c=e[0].name.substring(e[0].name.lastIndexOf(".")),l=[".png",".bmp",".jpeg",".tif",".gif",".jpg"];if(!l.find(t=>t===c))return this.$message.warning(this.$i18n.t("File sai định dạng. Cần thuộc các định dạng sau: ")+l.join(", ")),!1;this.fileImage=e[0],this.imageSelected=URL.createObjectURL(e[0])}catch(e){console.log("handleUploadContent",e)}},changeProfile(){V({title:"Thay đổi thông tin cá nhân",message:u("p",null,[u("span",null,"Bạn có muốn thay đổi thông tin không ?")]),showCancelButton:!0,confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",beforeClose:(a,e,c)=>{if(a==="confirm"){e.confirmButtonLoading=!0,e.confirmButtonText="Loading...",e.closeForm=!1;const l=new FormData;let t="";this.fileImage?t=this.fileImage:t=this.formData.image,console.log(this.fileImage??this.formData.image),l.append("first_name",this.formData.first_name),l.append("last_name",this.formData.last_name),l.append("date_of_birth",this.formData.date_of_birth??""),l.append("image",t),l.append("phone",this.formData.phone??""),l.append("male",this.formData.male??""),l.append("description",this.formData.description??""),l.append("remark",this.formData.remark??""),axios.post(route("profiles.update",this.formData.id),l).then(o=>{e.confirmButtonLoading=!1,c()}).catch(()=>{})}else c()}}).then(()=>{C({type:"success",message:"Thay đổi thông tin cá nhân thành công"}),this.isEditProfile="false",location.reload()}).catch(()=>{})}}},d=a=>(T("data-v-82f6c1ad"),a=a(),j(),a),L={class:"min-w-[280px] w-[280px]"},Y={class:"flex-auto ml-[16px]"},F={class:"py-[20px] bg-[#fff] box-shadow"},z=d(()=>s("div",{class:"border-b-[2px] mb-[8px]"},[s("div",{class:"border-l-[5px] border-[#db562b] text-[#db562b] font-bold ml-[8px] pl-[8px] mb-[12px] text-[17px]"}," Thông tin tài khoản cá nhân ")],-1)),A={class:"mx-[22px] mt-[24px]"},H={class:"text-[16px] font-bold text-[#6c757d] ml-[12px] mb-[18px]"},R={class:"row gap-y-[12px]"},G={class:"relative col-4"},O={class:"text-[#fff] text-[50px]"},X=["src","alt"],q=["src","alt"],K={key:3,class:"absolute top-[12px] right-[0] z-50"},Q=d(()=>s("i",{class:"bi bi-trash3"},null,-1)),J=[Q],W=d(()=>s("i",{class:"bi bi-camera"},null,-1)),Z=[W],$={class:"col-6 ml-[12px]"},ee={class:"flex"},te={class:"w-[150px]"},se=d(()=>s("div",{class:"text-[#000] font-bold text-[14px] mb-[3px]"},[v("Họ "),s("span",{class:"text-[red]"},"*")],-1)),ie={class:"w-[150px] ml-[30px]"},oe=d(()=>s("div",{class:"text-[#000] font-bold text-[14px] mb-[3px]"},[v("Tên "),s("span",{class:"text-[red]"},"*")],-1)),le={class:"mt-[16px] flex"},ae={class:"w-[80px] mr-[24px]"},ne=d(()=>s("div",{class:"text-[#000] font-bold text-[14px] mb-[3px]"},"Giới tính",-1)),de={class:"flex-auto"},re=d(()=>s("div",{class:"text-[#000] font-bold text-[14px] mb-[3px]"},"Ngày sinh",-1)),pe={class:"mt-[16px]"},me=d(()=>s("div",{class:"text-[#000] font-bold text-[14px] mb-[3px]"},"Số điện thoại",-1)),ce={class:"col-12 mt-[12px] h-[80px]"},fe=d(()=>s("div",{class:"text-[16px] font-bold"},"Mô tả",-1)),xe={class:"col-12 mt-[12px] h-[170px]"},he=d(()=>s("div",{class:"text-[16px] font-bold"},"Đánh dấu",-1)),ue={key:0,class:"pb-[12px] pt-[58px] mr-[34px]"},ge={class:"flex justify-end text-[14px] mr-[24px]"},_e={key:1,class:"pb-[12px] pt-[58px] mr-[34px]"},be={class:"flex justify-end text-[14px] mr-[24px]"};function ve(a,e,c,l,t,o){const D=m("Navigation"),f=m("el-input"),x=m("el-option"),y=m("el-select"),k=m("el-date-picker"),w=m("AppLayout");return r(),E(w,{"current-tab":"main-full"},{"main-full":g(()=>[s("div",L,[n(D,{currentTab:"tab-0"})]),s("div",Y,[s("div",F,[z,s("div",A,[s("div",H,"ID: "+_(t.formData.code),1),s("div",R,[s("div",G,[!t.imageSelected&&!t.formData.image?(r(),p("div",{key:0,class:h(["bg-[#5c6bc0] w-[226px] h-[226px] rounded-[8px] border-[1px] flex justify-center items-center",{"cursor-pointer":t.isEditProfile}]),onClick:e[0]||(e[0]=(...i)=>o.changeImage&&o.changeImage(...i))},[s("span",O,_(t.formData.first_name[0]),1)],2)):t.imageSelected?(r(),p("img",{key:1,src:t.imageSelected,alt:t.formData.image,class:h(["min-w-[226px] w-[226px] h-[226px] rounded-[8px] border-[1px] object-cover",{"cursor-pointer":t.isEditProfile}]),onClick:e[1]||(e[1]=(...i)=>o.changeImage&&o.changeImage(...i))},null,10,X)):(r(),p("img",{key:2,src:t.formData.image,alt:t.formData.image,class:h(["min-w-[226px] w-[226px] h-[226px] rounded-[8px] border-[1px] object-cover",{"cursor-pointer":t.isEditProfile}]),onClick:e[2]||(e[2]=(...i)=>o.changeImage&&o.changeImage(...i))},null,10,q)),t.isEditProfile?(r(),p("div",K,[t.formData.image||t.imageSelected?(r(),p("div",{key:0,class:"bg-[#fff] py-[2px] px-[6px] text-[#000] text-[15px] rounded-[6px] mb-[8px] cursor-pointer hover:bg-[#ced4da]",onClick:e[3]||(e[3]=(...i)=>o.deleteImage&&o.deleteImage(...i))},J)):b("",!0),s("div",{class:"bg-[#fff] py-[2px] px-[6px] text-[#000] text-[15px] rounded-[6px] cursor-pointer hover:bg-[#ced4da]",onClick:e[4]||(e[4]=(...i)=>o.changeImage&&o.changeImage(...i))},Z)])):b("",!0),S(s("input",{ref:"file",type:"file",onChange:e[5]||(e[5]=(...i)=>o.handleUploadContent&&o.handleUploadContent(...i)),accept:".jpg,.png,.bmp,.jpeg,.tif,.gif"},null,544),[[B,!1]])]),s("div",$,[s("div",ee,[s("div",te,[se,n(f,{modelValue:t.formData.first_name,"onUpdate:modelValue":e[6]||(e[6]=i=>t.formData.first_name=i),placeholder:"Họ",class:"h-[30px]",disabled:!t.isEditProfile},null,8,["modelValue","disabled"])]),s("div",ie,[oe,n(f,{modelValue:t.formData.last_name,"onUpdate:modelValue":e[7]||(e[7]=i=>t.formData.last_name=i),placeholder:"Tên",class:"h-[30px]",disabled:!t.isEditProfile},null,8,["modelValue","disabled"])])]),s("div",le,[s("div",ae,[ne,n(y,{modelValue:t.formData.male,"onUpdate:modelValue":e[8]||(e[8]=i=>t.formData.male=i),placeholder:"Giới tính",disabled:!t.isEditProfile},{default:g(()=>[n(x,{value:"0",label:"Nam"}),n(x,{value:"1",label:"Nữ"}),n(x,{value:"2",label:"Khác"})]),_:1},8,["modelValue","disabled"])]),s("div",de,[re,n(k,{class:"mt-[2px] text-[10px]",modelValue:t.formData.date_of_birth,"onUpdate:modelValue":e[9]||(e[9]=i=>t.formData.date_of_birth=i),type:"date",format:"DD-MM-YYYY","value-format":"DD-MM-YYYY","default-time":a.defaultTime,placeholder:"Nhập ngày sinh",clearable:"",disabled:!t.isEditProfile},null,8,["modelValue","default-time","disabled"])])]),s("div",pe,[me,n(f,{modelValue:t.formData.phone,"onUpdate:modelValue":e[10]||(e[10]=i=>t.formData.phone=i),placeholder:"Số điện thoại",class:"h-[30px]",disabled:!t.isEditProfile},null,8,["modelValue","disabled"])])]),s("div",ce,[fe,n(f,{modelValue:t.formData.description,"onUpdate:modelValue":e[11]||(e[11]=i=>t.formData.description=i),type:"textarea",placeholder:"Mô tả",class:"h-[36px] mt-[4px]",maxlength:"255",disabled:!t.isEditProfile},null,8,["modelValue","disabled"])]),s("div",xe,[he,n(f,{modelValue:t.formData.remark,"onUpdate:modelValue":e[12]||(e[12]=i=>t.formData.remark=i),type:"textarea",placeholder:"Chi tiết comment",class:"h-[30px] mt-[4px]",autosize:{minRows:8,maxRows:8},disabled:!t.isEditProfile},null,8,["modelValue","disabled"])])]),t.isEditProfile?(r(),p("div",_e,[s("div",be,[s("div",{onClick:e[14]||(e[14]=(...i)=>o.cancel&&o.cancel(...i)),class:"cursor-pointer flex justify-center items-center w-[110px] rounded-[4px] bg-[#ffffff] py-[4px] text-[15px] text-black border border-[#7d7f92]"}," Hủy bỏ "),s("div",{class:"cursor-pointer flex justify-center items-center w-[110px] ml-[18px] rounded-[4px] bg-[#007bff] py-[4px] text-[15px] text-white",onClick:e[15]||(e[15]=(...i)=>o.changeProfile&&o.changeProfile(...i))}," Xác nhận ")])])):(r(),p("div",ue,[s("div",ge,[s("div",{class:"w-[100px] py-[6px] bg-[#007bff] text-[#fff] text-center rounded-[4px] cursor-pointer",onClick:e[13]||(e[13]=(...i)=>o.editProfile&&o.editProfile(...i))}," Chỉnh sửa ")])]))])])])]),_:1})}const Ve=U(M,[["render",ve],["__scopeId","data-v-82f6c1ad"]]);export{Ve as default};
