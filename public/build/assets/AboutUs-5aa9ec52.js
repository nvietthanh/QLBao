import{A as P}from"./AppLayoutAdmin-f23b16b5.js";import{C as V}from"./Ckeditor-04e30514.js";import{i as w,E as b,j as x,k as m,l,o as i,c as f,w as c,a as t,t as d,b as p,e as r,h as v,F as y,g as T,n as D,m as U}from"./app-c5eb5df1.js";import{D as H}from"./DataTable-8bfe0c83.js";import{P as j}from"./Paginate-192a713f.js";import{h as S}from"./moment-fbc5633a.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-7eaaec51.js";const X={components:{Link:w,CkeditorPost:V},data(){return{dialogVisible:!1,dataForm:{},content:"",errors:[]}},watch:{dialogVisible(s){s==!1&&(this.dataForm={},this.$refs.content.editorData="",this.errors=[])}},methods:{moment:S,async open(s){this.dialogVisible=!0,this.dataForm=s},sendReply(){this.$refs.content.editorData?b.confirm(`Bạn có gửi câu trả lời trên cho tài khoản ${this.dataForm.email} không?`,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{const s={content:this.$refs.content.editorData};x.post(route("admin.send-reply-contact",this.dataForm.id),s).then(e=>{this.dialogVisible=!1,this.$emit("update-change"),m({type:"success",message:"Gửi email thành công"})}).catch(e=>{m({type:"error",message:e.response.data.message})})}).catch(()=>{}):this.errors.content="Trường nội dung là bắt buộc"}}},Y=t("div",{class:"text-center font-bold text-[18px]"}," Trả lời liên hệ ",-1),R={class:"flex mt-[24px]"},z={class:"py-[12px] px-[12px] w-[100%]"},E={class:"mt-[12px]"},G=t("span",{class:"text-[16px] font-bold"},"Địa chỉ email:",-1),W={class:"ml-[12px] text-[15px]"},K={class:"mt-[12px] w-[100%]"},Q=t("span",{class:"text-[16px] font-bold"},"Nội dung câu trả lời:",-1),I={key:0,class:"ml-[4px] text-[#ff0000]"},q={class:"pb-[12px] pt-[8px]"},J={class:"flex justify-end text-[14px] mr-[24px]"};function O(s,e,C,F,n,a){const u=l("ckeditor-post"),g=l("el-dialog");return i(),f(g,{modelValue:n.dialogVisible,"onUpdate:modelValue":e[1]||(e[1]=_=>n.dialogVisible=_),id:"show-reply-contact",class:"bg-[#f4f1f8] h-[89%] overflow-scroll",width:"720px",style:{"margin-top":"42px !important"},"show-close":!0},{header:c(()=>[Y]),footer:c(()=>[t("div",q,[t("div",J,[t("div",{class:"cursor-pointer text-center w-[160px] ml-[18px] rounded-[4px] bg-[#007bff] h-[38px] leading-[38px] text-[16px] text-white",onClick:e[0]||(e[0]=_=>a.sendReply())}," Gửi ")])])]),default:c(()=>[t("div",R,[t("div",z,[t("div",E,[G,t("span",W,d(n.dataForm.email),1)]),t("div",K,[Q,p(u,{class:"mt-[8px]",ref:"content",contentProp:n.content},null,8,["contentProp"]),n.errors.content?(i(),r("div",I,d(n.errors.content),1)):v("",!0)])])])]),_:1},8,["modelValue"])}const Z=k(X,[["render",O]]);const tt={components:{Link:w,ShowFormMailContact:Z},data(){return{dialogVisible:!1,id:"",dataForm:{}}},watch:{dialogVisible(s){s==!1&&(this.dataForm={})}},methods:{moment:S,open(s){this.dialogVisible=!0,this.id=s.id,this.fetchData()},async fetchData(){const s=await x.get(route("admin.get-contact",this.id));this.dataForm=s.data.data},replyContact(){this.$refs.showFormMailContact.open(this.dataForm)}}},et=t("div",{class:"text-center font-bold text-[18px]"}," Xem chi tiết liên hệ ",-1),st={class:"flex mt-[38px]"},nt={class:"py-[12px] px-[12px]"},ot=t("div",{class:"text-[18px] font-bold text-[blue]"},"Thông tin chi tiết liên hệ:",-1),at={class:"px-[24px]"},it={class:"mt-[6px]"},lt=t("span",{class:"text-[16px] font-bold"},"Họ tên:",-1),ct={class:"ml-[12px] text-[15px]"},rt={class:"mt-[12px]"},dt=t("span",{class:"text-[16px] font-bold"},"Địa chỉ email:",-1),pt={class:"ml-[12px] text-[15px]"},ht={class:"mt-[12px]"},xt=t("span",{class:"text-[16px] font-bold"},"Tiêu đề:",-1),mt={class:"ml-[12px] text-[15px]"},ut={class:"mt-[12px]"},_t=t("span",{class:"text-[16px] font-bold"},"Ngày tạo:",-1),gt={class:"ml-[12px] text-[15px]"},ft={class:"mt-[12px]"},bt=t("span",{class:"text-[16px] font-bold"},"Nội dung:",-1),vt=["innerHTML"],yt={class:"mt-[12px]"},wt=t("span",{class:"text-[16px] font-bold"},"Hình ảnh kèm theo:",-1),kt={class:"mt-[12px] grid grid-cols-3 gap-3"},Ct={key:0,class:"pb-[12px] pt-[8px]"},Ft={class:"flex justify-end text-[14px] mr-[24px]"},Dt={key:1,class:"pb-[12px] pt-[8px]"},Vt={class:"flex justify-end text-[14px] mr-[24px]"};function Tt(s,e,C,F,n,a){const u=l("el-image"),g=l("ShowFormMailContact"),_=l("el-dialog");return i(),f(_,{modelValue:n.dialogVisible,"onUpdate:modelValue":e[2]||(e[2]=h=>n.dialogVisible=h),id:"show-contact",class:"bg-[#f4f1f8] h-[90%] overflow-scroll",width:"820px",style:{"margin-top":"34px !important"},"show-close":!0},{header:c(()=>[et]),footer:c(()=>[this.dataForm.is_reply?(i(),r("div",Dt,[t("div",Vt,[t("div",{class:"cursor-pointer text-center w-[160px] ml-[18px] rounded-[4px] bg-[#007bff] h-[38px] leading-[38px] text-[16px] text-white",onClick:e[1]||(e[1]=h=>a.replyContact())}," Đã trả lời (Gửi lại) ")])])):(i(),r("div",Ct,[t("div",Ft,[t("div",{class:"cursor-pointer text-center w-[160px] ml-[18px] rounded-[4px] bg-[#007bff] h-[38px] leading-[38px] text-[16px] text-white",onClick:e[0]||(e[0]=h=>a.replyContact())}," Gửi email trả lời ")])]))]),default:c(()=>[t("div",st,[t("div",nt,[ot,t("div",at,[t("div",it,[lt,t("span",ct,d(n.dataForm.name),1)]),t("div",rt,[dt,t("span",pt,d(n.dataForm.email),1)]),t("div",ht,[xt,t("span",mt,d(n.dataForm.title),1)]),t("div",ut,[_t,t("span",gt,d(n.dataForm.created_at),1)]),t("div",ft,[bt,t("div",{innerHTML:n.dataForm.content,class:"pl-[24px] text-[15px]"},null,8,vt)]),t("div",yt,[wt,t("div",kt,[(i(!0),r(y,null,T(n.dataForm.images,h=>(i(),f(u,{class:"h-[160px]",src:h,"zoom-rate":1.2,"preview-teleported":"true","hide-on-click-modal":"true","preview-src-list":n.dataForm.images,"initial-index":1,fit:"cover"},null,8,["src","zoom-rate","preview-src-list"]))),256))])])])])]),p(g,{ref:"showFormMailContact",onUpdateChange:a.fetchData},null,8,["onUpdateChange"])]),_:1},8,["modelValue"])}const St=k(tt,[["render",Tt]]),$t={components:{AppLayoutAdmin:P,Link:w,Paginate:j,DataTable:H,CkeditorPost:V,ShowFormContact:St},data(){return{tab:"tab-0",fields:[{key:"name",label:"Họ tên",align:"center",width:180},{key:"email",label:"Email",align:"center",width:180},{key:"title",label:"Tiêu đề",align:"center",width:180},{key:"content",label:"Nội dung",align:"center"},{key:"images",label:"Hình ảnh",align:"center",width:150},{key:"created_at",label:"Ngày tạo",align:"center",width:150},{key:"options",label:"Tùy chỉnh",align:"center",width:100}],options:[6,12,18],filterSearch:{limit:6,dateRange:"",search:"",page:1},paginate:[],tableData:[],selectedValue:[],dataForm:{title:"",content:""},errors:[]}},created(){this.fetchData(),document.title="Quản lý liên hệ - Admin hệ thống"},methods:{fetchData(){x.get(route("admin.get-about-us")).then(s=>{this.dataForm.title=s.data.title,this.$refs.content.editorData=s.data.content})},fetchDataList(){const s={...this.filterSearch};x.get(route("admin.get-list-about-us",s)).then(e=>{this.tableData=e.data.data,this.paginate=e.data.meta})},updateAboutUs(){this.errors=[],b.confirm("Bạn có muốn cập nhật thông tin liên hệ không?","Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{const s=new FormData;s.append("title",this.dataForm.title??""),s.append("content",this.$refs.content.editorData??""),x.post(route("admin.update-about-us"),s).then(e=>{this.fetchData(),m({type:"success",message:"Cập nhật thông tin liên hệ thành công"})}).catch(e=>{this.errors=e.response.data.errors})}).catch(()=>{})},changeTab(s){this.tab=s,s=="tab-0"?this.fetchData():this.fetchDataList()},handleCurrentPage(s){this.filterSearch.page=s,this.fetchDataList()},handleSelectionChange(s){this.selectedValue=s},deleteAbout(s){b.confirm("Bạn có muốn xóa liên hệ này không?","Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{x.delete(route("admin.delete-contact",s.id)).then(e=>{this.fetchDataList(),m({type:"success",message:"Xóa liên hệ thành công"})}).catch(e=>{m({type:"error",message:e.response.data.message})})}).catch(()=>{})},deleteAbouts(){b.confirm("Bạn có muốn xóa các liên hệ này không?","Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{const s={contactIds:this.selectedValue};x.post(route("admin.delete-contacts"),s).then(e=>{this.fetchDataList(),m({type:"success",message:"Xóa liên hệ thành công"})}).catch(e=>{m({type:"error",message:e.response.data.message})})}).catch(()=>{})},showContact(s){this.$refs.showFormContact.open(s)}}},At=t("div",{class:"mt-[12px] flex text-[18px] font-bold uppercase"}," Quản lý thông tin liên hệ ",-1),Bt={class:"mt-[12px] flex items-center text-[15px] border-b-[3px] border-b-[#adb5bd]"},Lt={class:"mt-[18px] mb-[28px]"},Mt={class:"mb-[12px]"},Nt=t("div",{class:"mb-[4px] font-bold text-[17px]"},"Tiêu đề",-1),Pt={key:0,class:"mt-[5px] text-[15px] text-[#ff0000]"},Ut={class:"mt-[18px] text-[14px]"},Ht=t("div",{class:"mb-[4px] font-bold text-[17px]"},"Nội dung",-1),jt={key:0,class:"mt-[5px] text-[15px] text-[#ff0000]"},Xt={class:"mb-[28px]"},Yt={class:"flex justify-end text-[14px] mr-[24px]"},Rt={key:1,class:"my-[28px]"},zt={class:"mb-[18px] flex items-center"},Et={class:"text-left hover:text-[blue]"},Gt={class:"text-left hover:text-[blue]"},Wt={key:0},Kt=["src"],Qt={key:1},It={class:"text-left hover:text-[blue]"},qt={class:"text-left hover:text-[blue]"},Jt=["onClick"],Ot=t("i",{class:"bi bi-gear-fill"},null,-1),Zt=[Ot],te=["onClick"],ee=t("i",{class:"bi bi-trash3-fill"},null,-1),se=[ee],ne={key:0,class:"flex justify-end mt-[32px] mr-[16px]"};function oe(s,e,C,F,n,a){const u=l("el-input"),g=l("ckeditor-post"),_=l("el-option"),h=l("el-select"),$=l("el-date-picker"),A=l("DataTable"),B=l("Paginate"),L=l("ShowFormContact"),M=l("AppLayoutAdmin");return i(),f(M,{currentTab:"tab-6",currentTabChild:"tab-3"},{"main-full":c(()=>[At,t("div",Bt,[t("div",{class:D(["w-[120px] text-center py-[8px] cursor-pointer",{"bg-[#495057] text-white":n.tab=="tab-0"}]),onClick:e[0]||(e[0]=o=>a.changeTab("tab-0"))}," Thông tin ",2),t("div",{class:D(["w-[180px] text-center py-[8px] cursor-pointer",{"bg-[#495057] text-white":n.tab=="tab-1"}]),onClick:e[1]||(e[1]=o=>a.changeTab("tab-1"))}," Danh sách câu hỏi ",2)]),n.tab=="tab-0"?(i(),r(y,{key:0},[t("div",Lt,[t("div",Mt,[Nt,p(u,{modelValue:n.dataForm.title,"onUpdate:modelValue":e[2]||(e[2]=o=>n.dataForm.title=o),size:"large",placeholder:"Nhập tiêu đề"},null,8,["modelValue"]),n.errors.title?(i(),r("div",Pt,d(n.errors.title[0]),1)):v("",!0)]),t("div",Ut,[Ht,p(g,{class:"mt-[8px]",ref:"content",contentProp:n.dataForm.content},null,8,["contentProp"]),n.errors.content?(i(),r("div",jt,d(n.errors.content[0]),1)):v("",!0)])]),t("div",Xt,[t("div",Yt,[t("div",{class:"cursor-pointer flex justify-center items-center w-[110px] rounded-[4px] bg-[#ffffff] py-[4px] h-[32px] text-[15px] text-black border border-[#7d7f92]",onClick:e[3]||(e[3]=(...o)=>s.cancel&&s.cancel(...o))}," Hủy bỏ "),t("div",{class:"cursor-pointer flex justify-center items-center w-[110px] ml-[18px] rounded-[4px] bg-[#007bff] py-[4px] h-[32px] text-[15px] text-white",onClick:e[4]||(e[4]=(...o)=>a.updateAboutUs&&a.updateAboutUs(...o))}," Xác nhận ")])])],64)):(i(),r("div",Rt,[t("div",zt,[p(h,{modelValue:n.filterSearch.limit,"onUpdate:modelValue":e[5]||(e[5]=o=>n.filterSearch.limit=o),class:"max-w-[60px] ml-[8px]",onChange:e[6]||(e[6]=o=>a.fetchDataList())},{default:c(()=>[(i(!0),r(y,null,T(n.options,o=>(i(),f(_,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),p($,{modelValue:n.filterSearch.dateRange,"onUpdate:modelValue":e[7]||(e[7]=o=>n.filterSearch.dateRange=o),type:"daterange","start-placeholder":"Ngày bắt đầu","end-placeholder":"Ngày kết thúc",size:s.small,format:"DD-MM-YYYY","value-format":"DD-MM-YYYY",class:"max-w-[260px] mx-[28px]",onChange:e[8]||(e[8]=o=>a.fetchDataList())},null,8,["modelValue","size"]),p(u,{class:"mr-[28px] max-w-[300px]",modelValue:n.filterSearch.search,"onUpdate:modelValue":e[9]||(e[9]=o=>n.filterSearch.search=o),placeholder:"Nhập từ khóa",clearable:"",onKeyup:e[10]||(e[10]=U(o=>a.fetchDataList(),["enter"]))},null,8,["modelValue"]),t("div",{class:"text-[14px] bg-[red] w-[130px] h-[32px] leading-[32px] text-white text-center rounded-[4px] cursor-pointer",onClick:e[11]||(e[11]=(...o)=>a.deleteAbouts&&a.deleteAbouts(...o))}," Xóa liên hệ ")]),p(A,{fields:n.fields,items:n.tableData,"enable-select-box":"",onRowSelected:a.handleSelectionChange},{name:c(({row:o})=>[t("div",Et,d(o.name),1)]),email:c(({row:o})=>[t("div",Gt,d(o.email),1)]),images:c(({row:o})=>[o.images[0]?(i(),r("div",Wt,[t("img",{src:o.images[0],alt:"",class:"w-[100%] h-[100px] object-cover"},null,8,Kt)])):(i(),r("div",Qt))]),title:c(({row:o})=>[t("div",It,d(o.title),1)]),content:c(({row:o})=>[t("div",qt,d(o.content),1)]),options:c(({row:o})=>[t("span",{class:"px-[6px] py-[8px] text-[20px] cursor-pointer",onClick:N=>a.showContact(o)},Zt,8,Jt),t("span",{class:"px-[6px] py-[8px] text-[20px] cursor-pointer",onClick:N=>a.deleteAbout(o)},se,8,te)]),_:1},8,["fields","items","onRowSelected"]),n.tableData.length!=0?(i(),r("div",ne,[p(B,{onPageChange:a.handleCurrentPage,paginate:n.paginate,"current-page":n.filterSearch.page||1,"paginate-background":""},null,8,["onPageChange","paginate","current-page"])])):v("",!0)])),p(L,{ref:"showFormContact"},null,512)]),_:1})}const xe=k($t,[["render",oe]]);export{xe as default};
