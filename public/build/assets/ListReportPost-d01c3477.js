import{A as R}from"./AppLayoutAdmin-d2e3b506.js";import{i as F,j as d,k as h,E as u,l as a,o as c,c as g,w as s,a as o,b as l,e as m,g as L,F as N,m as A,t as f,h as M}from"./app-2a871929.js";import{D as Y}from"./DataTable-8bf8d838.js";import{P as X}from"./Paginate-55ef9a15.js";import H from"./ShowPost-4fbfceff.js";import U from"./ShowReport-95a0ae6c.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-4ecace4f.js";import"./moment-fbc5633a.js";const E={components:{AppLayoutAdmin:R,Link:F,Paginate:X,DataTable:Y,ShowPostForm:H,ShowReportForm:U},data(){return{tab:"tab-0",fields:[{key:"post_title",label:"Bài viết",align:"center",width:200},{key:"post_status",label:"Trạng thái",align:"center",width:100},{key:"content",label:"Nội dung",align:"center"},{key:"image",label:"Hình ảnh",align:"center",width:170},{key:"account_report_email",label:"Tài khoản report",align:"center",sortable:!0,width:170},{key:"created_at",label:"Ngày tạo",align:"center",width:150},{key:"options",label:"Tùy chỉnh",align:"center",width:95}],options:[10,20,30],filterSearch:{limit:10,type:"0",dateRange:"",search:"",page:1},paginate:[],tableData:[],selectedValue:[]}},created(){this.fetchData(),document.title="Quản lý báo cáo bài viết - Admin hệ thống"},methods:{clearFilter(){this.filterSearch.page=1,this.filterSearch.type="0",this.filterSearch.search="",this.filterSearch.limit=10,this.paginate=[],this.tableData=[]},async fetchData(){const t={...this.filterSearch},n=await d.get(route("admin.report-posts.index",t));this.tableData=n.data.data,this.paginate=n.data.meta},handleCurrentPage(t){this.filterSearch.page=t,this.fetchData()},handleSelectionChange(t){this.selectedValue=t},deleteSelections(){this.selectedValue.length==0?h({type:"warning",message:"Chọn báo cáo vi phạm muốn xóa"}):u.confirm("Bạn có muốn xóa các báo cáo vi phạm đã chọn không?","Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{const t={reportPosts:this.selectedValue};d.post(route("admin.report-posts.delete-posts"),t).then(n=>{this.fetchData(),h({type:"success",message:"Xóa báo cáo vi phạm thành công"})})}).catch(()=>{})},openPost(t){this.$refs.showPostForm.open(t)},openReport(t){this.$refs.showReportForm.open(t)},deletePost(t){u.confirm(`Bạn có muốn xoá bài viết ${t.post_title} không?`,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{d.delete(route("admin.posts.destroy",t.post_id)).then(n=>{this.fetchData(),h({type:"success",message:"Xóa bài viết thành công"})})}).catch(()=>{})},changeStatusPost(t){u.confirm(`Bạn có muốn thay đổi trạng thái bài viết ${t.post_title} không?`,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{d.get(route("admin.posts.change-status",t.post_id)).then(n=>{this.fetchData(),h({type:"success",message:"Thay đổi trạng thái bài viết thành công"})})}).catch(()=>{})}}},W=o("div",{class:"mt-[12px] flex text-[18px] font-bold uppercase"}," Danh sách báo cáo vi phạm ",-1),z={class:"mt-[12px] flex items-center text-[15px] border-b-[3px] border-b-[#adb5bd]"},K=o("div",{class:"w-[120px] text-center py-[6px] cursor-pointer"}," Người dùng ",-1),Q=o("div",{class:"w-[120px] text-center py-[6px] cursor-pointer bg-[#495057] text-white"}," Bài viết ",-1),q={class:"my-[18px]"},G={class:"mb-[18px] flex items-center"},I={class:"mx-[28px]"},J=["onClick"],O={class:"h-[36px] flex justify-center items-center"},Z=["innerHTML"],$=["src"],ee={key:1},te={class:"text-left"},ne={class:"flex items-center"},oe=["onClick"],ae=o("i",{class:"bi bi-eye-fill"},null,-1),se=[ae],le=o("span",{class:"p-[4px] text-[20px] cursor-pointer outline-none"},[o("i",{class:"bi bi-gear-fill"})],-1),ie=o("div",{class:"w-[130px]"}," Xóa bài viết ",-1),re=o("div",{class:"w-[130px]"}," Thay đổi trạng thái ",-1),ce={key:0,class:"flex justify-end mt-[32px] mr-[16px]"};function pe(t,n,de,he,i,r){const x=a("Link"),b=a("el-option"),y=a("el-select"),v=a("el-date-picker"),w=a("el-input"),k=a("el-switch"),_=a("el-dropdown-item"),S=a("el-dropdown-menu"),D=a("el-dropdown"),C=a("DataTable"),P=a("Paginate"),V=a("ShowPostForm"),T=a("ShowReportForm"),B=a("AppLayoutAdmin");return c(),g(B,{currentTab:"tab-5",currentTabChild:"tab-1"},{"main-full":s(()=>[W,o("div",z,[l(x,{href:t.route("admin.list-report-account")},{default:s(()=>[K]),_:1},8,["href"]),Q]),o("div",q,[o("div",G,[l(y,{modelValue:i.filterSearch.limit,"onUpdate:modelValue":n[0]||(n[0]=e=>i.filterSearch.limit=e),class:"max-w-[60px] ml-[8px]",onChange:n[1]||(n[1]=e=>r.fetchData())},{default:s(()=>[(c(!0),m(N,null,L(i.options,e=>(c(),g(b,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o("div",I,[l(v,{modelValue:i.filterSearch.dateRange,"onUpdate:modelValue":n[2]||(n[2]=e=>i.filterSearch.dateRange=e),type:"daterange","start-placeholder":"Ngày bắt đầu","end-placeholder":"Ngày kết thúc",size:t.small,format:"DD-MM-YYYY","value-format":"DD-MM-YYYY",class:"max-w-[260px]",onChange:n[3]||(n[3]=e=>r.fetchData())},null,8,["modelValue","size"])]),l(w,{class:"max-w-[300px]",modelValue:i.filterSearch.search,"onUpdate:modelValue":n[4]||(n[4]=e=>i.filterSearch.search=e),placeholder:"Nhập từ khóa",clearable:"",onKeyup:n[5]||(n[5]=A(e=>r.fetchData(),["enter"]))},null,8,["modelValue"]),o("div",{class:"text-[14px] ml-[24px] text-center w-[120px] py-[6px] rounded-[4px] bg-[red] text-white cursor-pointer",onClick:n[6]||(n[6]=(...e)=>r.deleteSelections&&r.deleteSelections(...e))}," Xóa báo cáo ")]),l(C,{fields:i.fields,items:i.tableData,"enable-select-box":"",onRowSelected:r.handleSelectionChange},{post_title:s(({row:e})=>[o("div",{class:"text-left cursor-pointer hover:text-[blue]",onClick:p=>r.openPost(e)},f(e.post_title),9,J)]),post_status:s(({row:e})=>[o("div",O,[l(k,{modelValue:e.post_status,"onUpdate:modelValue":p=>e.post_status=p,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"inline-prompt":"","active-text":"Activated","inactive-text":"Deactivated",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])]),content:s(({row:e})=>[o("div",{innerHTML:e.content,class:"text-left"},null,8,Z)]),image:s(({row:e})=>[e.image[0]?(c(),m("img",{key:0,src:e.image[0],class:"h-[110px] w-[100%] object-cover"},null,8,$)):(c(),m("div",ee,"No image"))]),account_report_email:s(({row:e})=>[o("div",te,f(e.account_report_email),1)]),options:s(({row:e})=>[o("div",ne,[o("span",{class:"p-[4px] text-[20px] cursor-pointer",onClick:p=>r.openReport(e)},se,8,oe),l(D,null,{dropdown:s(()=>[l(S,null,{default:s(()=>[l(_,{onClick:p=>r.deletePost(e)},{default:s(()=>[ie]),_:2},1032,["onClick"]),l(_,{onClick:p=>r.changeStatusPost(e)},{default:s(()=>[re]),_:2},1032,["onClick"])]),_:2},1024)]),default:s(()=>[le]),_:2},1024)])]),_:1},8,["fields","items","onRowSelected"]),i.tableData.length!=0?(c(),m("div",ce,[l(P,{onPageChange:r.handleCurrentPage,paginate:i.paginate,"current-page":i.filterSearch.page||1,"paginate-background":""},null,8,["onPageChange","paginate","current-page"])])):M("",!0)]),l(V,{ref:"showPostForm"},null,512),l(T,{ref:"showReportForm"},null,512)]),_:1})}const we=j(E,[["render",pe]]);export{we as default};
