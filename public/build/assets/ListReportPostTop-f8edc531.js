import{A as B}from"./AppLayoutAdmin-d2e3b506.js";import{i as F,j as h,E as m,k as u,l as a,o as p,c as _,w as i,a as n,b as s,e as g,g as A,F as L,m as R,t as Y,h as M}from"./app-2a871929.js";import{D as j}from"./DataTable-8bf8d838.js";import{P as N}from"./Paginate-55ef9a15.js";import U from"./ShowPost-4fbfceff.js";import E from"./ShowReport-95a0ae6c.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-4ecace4f.js";import"./moment-fbc5633a.js";const H={components:{AppLayoutAdmin:B,Link:F,Paginate:N,DataTable:j,ShowPostForm:U,ShowReportForm:E},data(){return{tab:"tab-0",fields:[{key:"post_title",label:"Bài viết",align:"center"},{key:"post_image",label:"Hình ảnh",align:"center",width:240},{key:"post_status",label:"Trạng thái",align:"center",width:200},{key:"count_report",label:"Số lượng",align:"center",sortable:!0,width:160},{key:"options",label:"Tùy chỉnh",align:"center",width:120}],options:[10,20,30],filterSearch:{limit:10,date:"",search:"",page:1},paginate:[],tableData:[],selectedValue:[]}},created(){this.fetchData(),document.title="Quản lý báo cáo bài viết - Admin hệ thống"},methods:{clearFilter(){this.filterSearch.page=1,this.filterSearch.type="0",this.filterSearch.search="",this.filterSearch.limit=10,this.paginate=[],this.tableData=[]},async fetchData(){const o={...this.filterSearch},t=await h.get(route("admin.report-posts.list-top",o));this.tableData=t.data.data,this.paginate=t.data.meta},handleCurrentPage(o){this.filterSearch.page=o,this.fetchData()},handleSelectionChange(o){this.selectedValue=o},openPost(o){this.$refs.showPostForm.open(o)},deletePost(o){m.confirm(`Bạn có muốn xoá bài viết ${o.post_title} không?`,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{h.delete(route("admin.posts.destroy",o.post_id)).then(t=>{this.fetchData(),u({type:"success",message:"Xóa bài viết thành công"})})}).catch(()=>{})},changeStatusPost(o){m.confirm(`Bạn có muốn thay đổi trạng thái bài viết ${o.post_title} không?`,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{h.get(route("admin.posts.change-status",o.post_id)).then(t=>{this.fetchData(),u({type:"success",message:"Thay đổi trạng thái bài viết thành công"})})}).catch(()=>{})}}},K=n("div",{class:"mt-[12px] flex text-[18px] font-bold uppercase"}," Danh sách báo cáo vi phạm ",-1),W={class:"mt-[12px] flex items-center text-[15px] border-b-[3px] border-b-[#adb5bd]"},Q=n("div",{class:"w-[120px] text-center py-[6px] cursor-pointer"}," Người dùng ",-1),q=n("div",{class:"w-[120px] text-center py-[6px] cursor-pointer bg-[#495057] text-white"}," Bài viết ",-1),z={class:"my-[18px]"},G={class:"mb-[18px] flex items-center"},I={class:"mx-[28px]"},J=["onClick"],O={class:"h-[36px] flex justify-center items-center"},Z=["src"],$={class:"flex justify-center items-center"},ee=n("span",{class:"p-[4px] text-[20px] cursor-pointer outline-none"},[n("i",{class:"bi bi-gear-fill"})],-1),te=n("div",{class:"w-[130px]"}," Xóa bài viết ",-1),oe=n("div",{class:"w-[130px]"}," Thay đổi trạng thái ",-1),ne={key:0,class:"flex justify-end mt-[32px] mr-[16px]"};function ae(o,t,se,le,l,r){const f=a("Link"),x=a("el-option"),b=a("el-select"),v=a("el-date-picker"),w=a("el-input"),y=a("el-switch"),d=a("el-dropdown-item"),S=a("el-dropdown-menu"),k=a("el-dropdown"),D=a("DataTable"),P=a("Paginate"),C=a("ShowPostForm"),V=a("ShowReportForm"),T=a("AppLayoutAdmin");return p(),_(T,{currentTab:"tab-5",currentTabChild:"tab-2"},{"main-full":i(()=>[K,n("div",W,[s(f,{href:o.route("admin.list-report-account-top")},{default:i(()=>[Q]),_:1},8,["href"]),q]),n("div",z,[n("div",G,[s(b,{modelValue:l.filterSearch.limit,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filterSearch.limit=e),class:"max-w-[60px] ml-[8px]",onChange:t[1]||(t[1]=e=>r.fetchData())},{default:i(()=>[(p(!0),g(L,null,A(l.options,e=>(p(),_(x,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n("div",I,[s(v,{modelValue:l.filterSearch.date,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filterSearch.date=e),type:"month",class:"max-w-[280px]",placeholder:"Chọn theo tháng năm",format:"MM-YYYY","value-format":"DD-MM-YYYY",onChange:t[3]||(t[3]=e=>r.fetchData())},null,8,["modelValue"])]),s(w,{class:"max-w-[300px]",modelValue:l.filterSearch.search,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filterSearch.search=e),placeholder:"Nhập từ khóa",clearable:"",onKeyup:t[5]||(t[5]=R(e=>r.fetchData(),["enter"]))},null,8,["modelValue"])]),s(D,{fields:l.fields,items:l.tableData,"enable-select-box":"",onRowSelected:r.handleSelectionChange},{post_title:i(({row:e})=>[n("div",{class:"text-left cursor-pointer hover:text-[blue]",onClick:c=>r.openPost(e)},Y(e.post_title),9,J)]),post_status:i(({row:e})=>[n("div",O,[s(y,{modelValue:e.post_status,"onUpdate:modelValue":c=>e.post_status=c,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"inline-prompt":"","active-text":"Activated","inactive-text":"Deactivated",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])]),post_image:i(({row:e})=>[n("img",{src:e.post_image,class:"h-[140px] w-[100%] object-cover"},null,8,Z)]),options:i(({row:e})=>[n("div",$,[s(k,null,{dropdown:i(()=>[s(S,null,{default:i(()=>[s(d,{onClick:c=>r.deletePost(e)},{default:i(()=>[te]),_:2},1032,["onClick"]),s(d,{onClick:c=>r.changeStatusPost(e)},{default:i(()=>[oe]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[ee]),_:2},1024)])]),_:1},8,["fields","items","onRowSelected"]),l.tableData.length!=0?(p(),g("div",ne,[s(P,{onPageChange:r.handleCurrentPage,paginate:l.paginate,"current-page":l.filterSearch.page||1,"paginate-background":""},null,8,["onPageChange","paginate","current-page"])])):M("",!0)]),s(C,{ref:"showPostForm"},null,512),s(V,{ref:"showReportForm"},null,512)]),_:1})}const ge=X(H,[["render",ae]]);export{ge as default};
