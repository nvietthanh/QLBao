import{A as F}from"./AppLayoutAdmin-d2e3b506.js";import{i as B,j as h,k as u,E as _,l as a,o as r,c as g,w as l,a as n,b as s,e as d,g as L,F as N,m as M,t as f,h as P}from"./app-2a871929.js";import{D as Y}from"./DataTable-8bf8d838.js";import{P as X}from"./Paginate-55ef9a15.js";import E from"./ShowReport-b7640b0c.js";import H from"./ChangeStatusForm-c902dc79.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-4ecace4f.js";import"./moment-fbc5633a.js";const j={components:{AppLayoutAdmin:F,Link:B,Paginate:X,DataTable:Y,ShowReportForm:E,ShowChangeStatustForm:H},data(){return{tab:"tab-0",fields:[{key:"account_email",label:"Email",align:"center",sortable:!0,width:180},{key:"account_status",label:"Trạng thái",align:"center",width:100},{key:"content",label:"Nội dung",align:"center"},{key:"image",label:"Hình ảnh",align:"center",width:160},{key:"account_report_email",label:"Tài khoản report",align:"center",sortable:!0,width:160},{key:"created_at",label:"Ngày tạo",align:"center",width:140},{key:"options",label:"Tùy chỉnh",align:"center",width:95}],options:[10,20,30],filterSearch:{limit:10,type:"0",dateRange:"",search:"",page:1},paginate:[],tableData:[],selectedValue:[]}},created(){this.fetchData(),document.title="Quản lý báo cáo người dùng - Admin hệ thống"},methods:{clearFilter(){this.filterSearch.page=1,this.filterSearch.type="0",this.filterSearch.search="",this.filterSearch.limit=10,this.paginate=[],this.tableData=[]},async fetchData(){const o={...this.filterSearch},t=await h.get(route("admin.report-accounts.index",o));this.tableData=t.data.data,this.paginate=t.data.meta},handleCurrentPage(o){this.filterSearch.page=o,this.fetchData()},handleSelectionChange(o){this.selectedValue=o},deleteSelections(){console.log(this.selectedValue),this.selectedValue.length==0?u({type:"warning",message:"Chọn báo cáo vi phạm muốn xóa"}):_.confirm("Bạn có muốn xóa các báo cáo vi phạm đã chọn không?","Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{const o={reportAccounts:this.selectedValue};h.post(route("admin.report-accounts.delete-accounts"),o).then(t=>{this.fetchData(),u({type:"success",message:"Xóa báo cáo vi phạm thành công"})})}).catch(()=>{})},deleteAccount(o){_.confirm(`Bạn có muốn xoá tài khoản ${o.account_email} không?`,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy bỏ",type:"warning",draggable:!0}).then(()=>{h.delete(route("admin.users.destroy",o.account_id)).then(t=>{this.fetchData(),u({type:"success",message:"Xóa tài khoản thành công"})})}).catch(()=>{})},changeStatusAccount(o){this.$refs.showChangeStatusForm.open(o)},openReport(o){this.$refs.showReportForm.open(o)}}},z=n("div",{class:"mt-[12px] flex text-[18px] font-bold uppercase"}," Danh sách báo cáo vi phạm ",-1),K={class:"mt-[12px] flex items-center text-[15px] border-b-[3px] border-b-[#adb5bd]"},W=n("div",{class:"w-[120px] text-center py-[6px] cursor-pointer bg-[#495057] text-white"}," Người dùng ",-1),Q=n("div",{class:"w-[120px] text-center py-[6px] cursor-pointer"}," Bài viết ",-1),q={class:"my-[18px]"},G={class:"mb-[18px] flex items-center"},I={class:"mx-[28px]"},J={class:"text-left cursor-pointer hover:text-[blue]"},O=["innerHTML"],Z={class:"h-[36px] flex justify-center items-center"},$=["src"],ee={key:1},te={class:"text-left"},ne={class:"flex items-center"},oe=["onClick"],ae=n("i",{class:"bi bi-eye-fill"},null,-1),le=[ae],se=n("span",{class:"p-[4px] text-[20px] cursor-pointer outline-none"},[n("i",{class:"bi bi-gear-fill"})],-1),ce=n("div",{class:"w-[130px]"}," Xóa tài khoản ",-1),ie=n("div",{class:"w-[130px]"}," Thay đổi trạng thái ",-1),re={key:0,class:"flex justify-end mt-[32px] mr-[16px]"};function pe(o,t,de,he,c,i){const x=a("Link"),b=a("el-option"),y=a("el-select"),v=a("el-date-picker"),w=a("el-input"),k=a("el-switch"),m=a("el-dropdown-item"),S=a("el-dropdown-menu"),C=a("el-dropdown"),D=a("DataTable"),V=a("Paginate"),A=a("ShowReportForm"),T=a("ShowChangeStatustForm"),R=a("AppLayoutAdmin");return r(),g(R,{currentTab:"tab-5",currentTabChild:"tab-1"},{"main-full":l(()=>[z,n("div",K,[W,s(x,{href:o.route("admin.list-report-post")},{default:l(()=>[Q]),_:1},8,["href"])]),n("div",q,[n("div",G,[s(y,{modelValue:c.filterSearch.limit,"onUpdate:modelValue":t[0]||(t[0]=e=>c.filterSearch.limit=e),class:"max-w-[60px] ml-[8px]",onChange:t[1]||(t[1]=e=>i.fetchData())},{default:l(()=>[(r(!0),d(N,null,L(c.options,e=>(r(),g(b,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n("div",I,[s(v,{class:"max-w-[260px]",modelValue:c.filterSearch.dateRange,"onUpdate:modelValue":t[2]||(t[2]=e=>c.filterSearch.dateRange=e),type:"daterange","start-placeholder":"Ngày bắt đầu","end-placeholder":"Ngày kết thúc",size:o.small,format:"DD-MM-YYYY","value-format":"DD-MM-YYYY",onChange:t[3]||(t[3]=e=>i.fetchData())},null,8,["modelValue","size"])]),s(w,{class:"max-w-[300px]",modelValue:c.filterSearch.search,"onUpdate:modelValue":t[4]||(t[4]=e=>c.filterSearch.search=e),placeholder:"Nhập từ khóa",clearable:"",onKeyup:t[5]||(t[5]=M(e=>i.fetchData(),["enter"]))},null,8,["modelValue"]),n("div",{class:"text-[14px] ml-[24px] text-center w-[120px] py-[6px] rounded-[4px] bg-[red] text-white cursor-pointer",onClick:t[6]||(t[6]=(...e)=>i.deleteSelections&&i.deleteSelections(...e))}," Xóa báo cáo ")]),s(D,{fields:c.fields,items:c.tableData,"enable-select-box":"",onRowSelected:i.handleSelectionChange},{account_email:l(({row:e})=>[n("div",J,f(e.account_email),1)]),content:l(({row:e})=>[n("div",{innerHTML:e.content,class:"text-left"},null,8,O)]),account_status:l(({row:e})=>[n("div",Z,[s(k,{modelValue:e.account_status,"onUpdate:modelValue":p=>e.account_status=p,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"inline-prompt":"","active-text":"Activated","inactive-text":"Deactivated",disabled:"",onClick:p=>o.changeStatus(e)},null,8,["modelValue","onUpdate:modelValue","onClick"])])]),image:l(({row:e})=>[e.image[0]?(r(),d("img",{key:0,src:e.image[0],class:"h-[110px] w-[100%] object-cover"},null,8,$)):(r(),d("div",ee,"No image"))]),account_report_email:l(({row:e})=>[n("div",te,f(e.account_report_email),1)]),options:l(({row:e})=>[n("div",ne,[n("span",{class:"p-[4px] text-[20px] cursor-pointer",onClick:p=>i.openReport(e)},le,8,oe),s(C,null,{dropdown:l(()=>[s(S,null,{default:l(()=>[s(m,{onClick:p=>i.deleteAccount(e)},{default:l(()=>[ce]),_:2},1032,["onClick"]),s(m,{onClick:p=>i.changeStatusAccount(e)},{default:l(()=>[ie]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[se]),_:2},1024)])]),_:1},8,["fields","items","onRowSelected"]),c.tableData.length!=0?(r(),d("div",re,[s(V,{onPageChange:i.handleCurrentPage,paginate:c.paginate,"current-page":c.filterSearch.page||1,"paginate-background":""},null,8,["onPageChange","paginate","current-page"])])):P("",!0)]),s(A,{ref:"showReportForm"},null,512),s(T,{ref:"showChangeStatusForm",onChangeAccount:t[7]||(t[7]=e=>i.fetchData())},null,512)]),_:1})}const we=U(j,[["render",pe]]);export{we as default};
